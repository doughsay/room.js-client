!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){var i,o,r;/*!
 * Knockout JavaScript library v3.4.2
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
!function(){!function(s){var a=this||(0,eval)("this"),u=a.document,l=a.navigator,c=a.jQuery,d=a.JSON;!function(a){o=[t,n],i=a,(r="function"==typeof i?i.apply(t,o):i)!==s&&(e.exports=r)}(function(e,t){function n(e,t){return!!(null===e||typeof e in g)&&e===t}function i(e,t){var n;return function(){n||(n=b.utils.setTimeout(function(){n=s,e()},t))}}function o(e,t){var n;return function(){clearTimeout(n),n=b.utils.setTimeout(e,t)}}function r(e){var t=this;return e&&b.utils.objectForEach(e,function(e,n){var i=b.extenders[e];"function"==typeof i&&(t=i(t,n)||t)}),t}function p(e,t){t&&t!==v?"beforeChange"===t?this._limitBeforeChange(e):this._origNotifySubscribers(e,t):this._limitChange(e)}function f(e,t){null!==t&&t.dispose&&t.dispose()}function h(e,t){var n=this.computedObservable,i=n[T];i.isDisposed||(this.disposalCount&&this.disposalCandidates[t]?(n.addDependencyTracking(t,e,this.disposalCandidates[t]),this.disposalCandidates[t]=null,--this.disposalCount):i.dependencyTracking[t]||n.addDependencyTracking(t,e,i.isSleeping?{_target:e}:n.subscribeToDependency(e)),e._notificationIsPending&&e._notifyNextChangeIfValueIsDifferent())}function m(e,t,n,i){b.bindingHandlers[e]={init:function(e,o,r,s,a){var u,l;return b.computed(function(){var r=o(),s=b.utils.unwrapObservable(r),c=!n!=!s,d=!l;(d||t||c!==u)&&(d&&b.computedContext.getDependenciesCount()&&(l=b.utils.cloneNodes(b.virtualElements.childNodes(e),!0)),c?(d||b.virtualElements.setDomNodeChildren(e,b.utils.cloneNodes(l)),b.applyBindingsToDescendants(i?i(a,r):a,e)):b.virtualElements.emptyNode(e),u=c)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},b.expressionRewriting.bindingRewriteValidators[e]=!1,b.virtualElements.allowedBindings[e]=!0}var b=void 0!==e?e:{};b.exportSymbol=function(e,t){for(var n=e.split("."),i=b,o=0;o<n.length-1;o++)i=i[n[o]];i[n[n.length-1]]=t},b.exportProperty=function(e,t,n){e[t]=n},b.version="3.4.2",b.exportSymbol("version",b.version),b.options={deferUpdates:!1,useOnlyNativeEvents:!1},b.utils=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,t){return e.__proto__=t,e}function i(e,t){if("input"!==b.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}function o(e,t,n){var i;t&&("object"==typeof e.classList?(i=e.classList[n?"add":"remove"],b.utils.arrayForEach(t.match(w),function(t){i.call(e.classList,t)})):"string"==typeof e.className.baseVal?r(e.className,"baseVal",t,n):r(e,"className",t,n))}function r(e,t,n,i){var o=e[t].match(w)||[];b.utils.arrayForEach(n.match(w),function(e){b.utils.addOrRemoveItem(o,e,i)}),e[t]=o.join(" ")}var p={__proto__:[]}instanceof Array,f={},h={};f[l&&/Firefox\/2/i.test(l.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],e(f,function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)h[t[n]]=e});var m={propertychange:!0},g=u&&function(){for(var e=3,t=u.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:s}(),v=6===g,y=7===g,w=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i))return e[i];return null},arrayRemoveItem:function(e,t){var n=b.utils.arrayIndexOf(e,t);n>0?e.splice(n,1):0===n&&e.shift()},arrayGetDistinctValues:function(e){e=e||[];for(var t=[],n=0,i=e.length;n<i;n++)b.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];for(var n=[],i=0,o=e.length;i<o;i++)n.push(t(e[i],i));return n},arrayFilter:function(e,t){e=e||[];for(var n=[],i=0,o=e.length;i<o;i++)t(e[i],i)&&n.push(e[i]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var i=b.utils.arrayIndexOf(b.utils.peekObservable(e),t);i<0?n&&e.push(t):n||e.splice(i,1)},canSetPrototype:p,extend:t,setPrototypeOf:n,setPrototypeOfOrExtend:p?n:t,objectForEach:e,objectMap:function(e,t){if(!e)return e;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i,e));return n},emptyDomNode:function(e){for(;e.firstChild;)b.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=b.utils.makeArray(e),n=t[0]&&t[0].ownerDocument||u,i=n.createElement("div"),o=0,r=t.length;o<r;o++)i.appendChild(b.cleanNode(t[o]));return i},cloneNodes:function(e,t){for(var n=0,i=e.length,o=[];n<i;n++){var r=e[n].cloneNode(!0);o.push(t?b.cleanNode(r):r)}return o},setDomNodeChildren:function(e,t){if(b.utils.emptyDomNode(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){for(var i=n[0],o=i.parentNode,r=0,s=t.length;r<s;r++)o.insertBefore(t[r],i);for(var r=0,s=n.length;r<s;r++)b.removeNode(n[r])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;e.length>1&&e[e.length-1].parentNode!==t;)e.length--;if(e.length>1){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},setOptionNodeSelectionState:function(e,t){g<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===s?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return b.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!b.utils.arrayFirst(e,b.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},catchFunctionErrors:function(e){return b.onError?function(){try{return e.apply(this,arguments)}catch(e){throw b.onError&&b.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(b.utils.catchFunctionErrors(e),t)},deferError:function(e){setTimeout(function(){throw b.onError&&b.onError(e),e},0)},registerEventHandler:function(e,t,n){var i=b.utils.catchFunctionErrors(n),o=g&&m[t];if(b.options.useOnlyNativeEvents||o||!c)if(o||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){i.call(e,t)},s="on"+t;e.attachEvent(s,r),b.utils.domNodeDisposal.addDisposeCallback(e,function(){e.detachEvent(s,r)})}else e.addEventListener(t,i,!1);else c(e).bind(t,i)},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=i(e,t);if(b.options.useOnlyNativeEvents||!c||n)if("function"==typeof u.createEvent){if("function"!=typeof e.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var o=h[t]||"HTMLEvents",r=u.createEvent(o);r.initEvent(t,!0,!0,a,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(n&&e.click)e.click();else{if(void 0===e.fireEvent)throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else c(e).trigger(t)},unwrapObservable:function(e){return b.isObservable(e)?e():e},peekObservable:function(e){return b.isObservable(e)?e.peek():e},toggleDomNodeCssClass:o,setTextContent:function(e,t){var n=b.utils.unwrapObservable(t);null!==n&&n!==s||(n="");var i=b.virtualElements.firstChild(e);!i||3!=i.nodeType||b.virtualElements.nextSibling(i)?b.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)]):i.data=n,b.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,g<=7)try{e.mergeAttributes(u.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},forceRefresh:function(e){if(g>=9){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(g){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=b.utils.unwrapObservable(e),t=b.utils.unwrapObservable(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},makeArray:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},createSymbolOrString:function(e){return e},isIe6:v,isIe7:y,ieVersion:g,getFormFields:function(e,t){for(var n=b.utils.makeArray(e.getElementsByTagName("input")).concat(b.utils.makeArray(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=n.length-1;r>=0;r--)i(n[r])&&o.push(n[r]);return o},parseJson:function(e){return"string"==typeof e&&(e=b.utils.stringTrim(e))?d&&d.parse?d.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!d||!d.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return d.stringify(b.utils.unwrapObservable(e),t,n)},postJson:function(t,n,i){i=i||{};var o=i.params||{},r=i.includeFields||this.fieldsIncludedWithJsonPost,s=t;if("object"==typeof t&&"form"===b.utils.tagNameLower(t)){var a=t;s=a.action;for(var l=r.length-1;l>=0;l--)for(var c=b.utils.getFormFields(a,r[l]),d=c.length-1;d>=0;d--)o[c[d].name]=c[d].value}n=b.utils.unwrapObservable(n);var p=u.createElement("form");p.style.display="none",p.action=s,p.method="post";for(var f in n){var h=u.createElement("input");h.type="hidden",h.name=f,h.value=b.utils.stringifyJson(b.utils.unwrapObservable(n[f])),p.appendChild(h)}e(o,function(e,t){var n=u.createElement("input");n.type="hidden",n.name=e,n.value=t,p.appendChild(n)}),u.body.appendChild(p),i.submitter?i.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}}(),b.exportSymbol("utils",b.utils),b.exportSymbol("utils.arrayForEach",b.utils.arrayForEach),b.exportSymbol("utils.arrayFirst",b.utils.arrayFirst),b.exportSymbol("utils.arrayFilter",b.utils.arrayFilter),b.exportSymbol("utils.arrayGetDistinctValues",b.utils.arrayGetDistinctValues),b.exportSymbol("utils.arrayIndexOf",b.utils.arrayIndexOf),b.exportSymbol("utils.arrayMap",b.utils.arrayMap),b.exportSymbol("utils.arrayPushAll",b.utils.arrayPushAll),b.exportSymbol("utils.arrayRemoveItem",b.utils.arrayRemoveItem),b.exportSymbol("utils.extend",b.utils.extend),b.exportSymbol("utils.fieldsIncludedWithJsonPost",b.utils.fieldsIncludedWithJsonPost),b.exportSymbol("utils.getFormFields",b.utils.getFormFields),b.exportSymbol("utils.peekObservable",b.utils.peekObservable),b.exportSymbol("utils.postJson",b.utils.postJson),b.exportSymbol("utils.parseJson",b.utils.parseJson),b.exportSymbol("utils.registerEventHandler",b.utils.registerEventHandler),b.exportSymbol("utils.stringifyJson",b.utils.stringifyJson),b.exportSymbol("utils.range",b.utils.range),b.exportSymbol("utils.toggleDomNodeCssClass",b.utils.toggleDomNodeCssClass),b.exportSymbol("utils.triggerEvent",b.utils.triggerEvent),b.exportSymbol("utils.unwrapObservable",b.utils.unwrapObservable),b.exportSymbol("utils.objectForEach",b.utils.objectForEach),b.exportSymbol("utils.addOrRemoveItem",b.utils.addOrRemoveItem),b.exportSymbol("utils.setTextContent",b.utils.setTextContent),b.exportSymbol("unwrap",b.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),b.utils.domData=new function(){function e(e,o){var r=e[n];if(!r||"null"===r||!i[r]){if(!o)return s;r=e[n]="ko"+t++,i[r]={}}return i[r]}var t=0,n="__ko__"+(new Date).getTime(),i={};return{get:function(t,n){var i=e(t,!1);return i===s?s:i[n]},set:function(t,n,i){if(i!==s||e(t,!1)!==s){e(t,!0)[n]=i}},clear:function(e){var t=e[n];return!!t&&(delete i[t],e[n]=null,!0)},nextKey:function(){return t+++n}}},b.exportSymbol("utils.domData",b.utils.domData),b.exportSymbol("utils.domData.clear",b.utils.domData.clear),b.utils.domNodeDisposal=new function(){function e(e,t){var n=b.utils.domData.get(e,o);return n===s&&t&&(n=[],b.utils.domData.set(e,o,n)),n}function t(e){b.utils.domData.set(e,o,s)}function n(t){var n=e(t,!1);if(n){n=n.slice(0);for(var o=0;o<n.length;o++)n[o](t)}b.utils.domData.clear(t),b.utils.domNodeDisposal.cleanExternalData(t),a[t.nodeType]&&i(t)}function i(e){for(var t,i=e.firstChild;t=i;)i=t.nextSibling,8===t.nodeType&&n(t)}var o=b.utils.domData.nextKey(),r={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{addDisposeCallback:function(t,n){if("function"!=typeof n)throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(n,i){var o=e(n,!1);o&&(b.utils.arrayRemoveItem(o,i),0==o.length&&t(n))},cleanNode:function(e){if(r[e.nodeType]&&(n(e),a[e.nodeType])){var t=[];b.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var i=0,o=t.length;i<o;i++)n(t[i])}return e},removeNode:function(e){b.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){c&&"function"==typeof c.cleanData&&c.cleanData([e])}}},b.cleanNode=b.utils.domNodeDisposal.cleanNode,b.removeNode=b.utils.domNodeDisposal.removeNode,b.exportSymbol("cleanNode",b.cleanNode),b.exportSymbol("removeNode",b.removeNode),b.exportSymbol("utils.domNodeDisposal",b.utils.domNodeDisposal),b.exportSymbol("utils.domNodeDisposal.addDisposeCallback",b.utils.domNodeDisposal.addDisposeCallback),b.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",b.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=e.match(/^<([a-z]+)[ >]/);return t&&p[t[1]]||i}function t(t,n){n||(n=u);var i=n.parentWindow||n.defaultView||a,o=b.utils.stringTrim(t).toLowerCase(),r=n.createElement("div"),s=e(o),l=s[0],c="ignored<div>"+s[1]+t+s[2]+"</div>";for("function"==typeof i.innerShiv?r.appendChild(i.innerShiv(c)):(f&&n.appendChild(r),r.innerHTML=c,f&&r.parentNode.removeChild(r));l--;)r=r.lastChild;return b.utils.makeArray(r.lastChild.childNodes)}function n(e,t){if(c.parseHTML)return c.parseHTML(e,t)||[];var n=c.clean([e],t);if(n&&n[0]){for(var i=n[0];i.parentNode&&11!==i.parentNode.nodeType;)i=i.parentNode;i.parentNode&&i.parentNode.removeChild(i)}return n}var i=[0,"",""],o=[1,"<table>","</table>"],r=[2,"<table><tbody>","</tbody></table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,"<select multiple='multiple'>","</select>"],p={thead:o,tbody:o,tfoot:o,tr:r,td:l,th:l,option:d,optgroup:d},f=b.utils.ieVersion<=8;b.utils.parseHtmlFragment=function(e,i){return c?n(e,i):t(e,i)},b.utils.setHtml=function(e,t){if(b.utils.emptyDomNode(e),null!==(t=b.utils.unwrapObservable(t))&&t!==s)if("string"!=typeof t&&(t=t.toString()),c)c(e).html(t);else for(var n=b.utils.parseHtmlFragment(t,e.ownerDocument),i=0;i<n.length;i++)e.appendChild(n[i])}}(),b.exportSymbol("utils.parseHtmlFragment",b.utils.parseHtmlFragment),b.exportSymbol("utils.setHtml",b.utils.setHtml),b.memoization=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function t(){return e()+e()}function n(e,t){if(e)if(8==e.nodeType){var i=b.memoization.parseMemoText(e.nodeValue);null!=i&&t.push({domNode:e,memoId:i})}else if(1==e.nodeType)for(var o=0,r=e.childNodes,s=r.length;o<s;o++)n(r[o],t)}var i={};return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var n=t();return i[n]=e,"\x3c!--[ko_memo:"+n+"]--\x3e"},unmemoize:function(e,t){var n=i[e];if(n===s)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return n.apply(null,t||[]),!0}finally{delete i[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var i=[];n(e,i);for(var o=0,r=i.length;o<r;o++){var s=i[o].domNode,a=[s];t&&b.utils.arrayPushAll(a,t),b.memoization.unmemoize(i[o].memoId,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),b.exportSymbol("memoization",b.memoization),b.exportSymbol("memoization.memoize",b.memoization.memoize),b.exportSymbol("memoization.unmemoize",b.memoization.unmemoize),b.exportSymbol("memoization.parseMemoText",b.memoization.parseMemoText),b.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",b.memoization.unmemoizeDomNodeAndDescendants),b.tasks=function(){function e(){if(r)for(var e,t=r,n=0;l<r;)if(e=o[l++]){if(l>t){if(++n>=5e3){l=r,b.utils.deferError(Error("'Too much recursion' after processing "+n+" task groups."));break}t=r}try{e()}catch(e){b.utils.deferError(e)}}}function t(){e(),l=r=o.length=0}function n(){b.tasks.scheduler(t)}var i,o=[],r=0,s=1,l=0;return i=a.MutationObserver?function(e){var t=u.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(t):u&&"onreadystatechange"in u.createElement("script")?function(e){var t=u.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,u.documentElement.removeChild(t),t=null,e()},u.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:i,schedule:function(e){return r||n(),o[r++]=e,s++},cancel:function(e){var t=e-(s-r);t>=l&&t<r&&(o[t]=null)},resetForTesting:function(){var e=r-l;return l=r=o.length=0,e},runEarly:e}}(),b.exportSymbol("tasks",b.tasks),b.exportSymbol("tasks.schedule",b.tasks.schedule),b.exportSymbol("tasks.runEarly",b.tasks.runEarly),b.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return b.dependentObservable({read:e,write:function(i){clearTimeout(n),n=b.utils.setTimeout(function(){e(i)},t)}})},rateLimit:function(e,t){var n,r,s;"number"==typeof t?n=t:(n=t.timeout,r=t.method),e._deferUpdates=!1,s="notifyWhenChangesStop"==r?o:i,e.limit(function(e){return s(e,n)})},deferred:function(e,t){if(!0!==t)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e._deferUpdates||(e._deferUpdates=!0,e.limit(function(t){var n,i=!1;return function(){if(!i){b.tasks.cancel(n),n=b.tasks.schedule(t);try{i=!0,e.notifySubscribers(s,"dirty")}finally{i=!1}}}}))},notify:function(e,t){e.equalityComparer="always"==t?null:n}};var g={undefined:1,boolean:1,number:1,string:1};b.exportSymbol("extenders",b.extenders),b.subscription=function(e,t,n){this._target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,b.exportProperty(this,"dispose",this.dispose)},b.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},b.subscribable=function(){b.utils.setPrototypeOfOrExtend(this,y),y.init(this)};var v="change",y={init:function(e){e._subscriptions={change:[]},e._versionNumber=1},subscribe:function(e,t,n){var i=this;n=n||v;var o=t?e.bind(t):e,r=new b.subscription(i,o,function(){b.utils.arrayRemoveItem(i._subscriptions[n],r),i.afterSubscriptionRemove&&i.afterSubscriptionRemove(n)});return i.beforeSubscriptionAdd&&i.beforeSubscriptionAdd(n),i._subscriptions[n]||(i._subscriptions[n]=[]),i._subscriptions[n].push(r),r},notifySubscribers:function(e,t){if(t=t||v,t===v&&this.updateVersion(),this.hasSubscriptionsForEvent(t)){var n=t===v&&this._changeSubscriptions||this._subscriptions[t].slice(0);try{b.dependencyDetection.begin();for(var i,o=0;i=n[o];++o)i.isDisposed||i.callback(e)}finally{b.dependencyDetection.end()}}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(e){var t,n,i,o,r=this,s=b.isObservable(r);r._origNotifySubscribers||(r._origNotifySubscribers=r.notifySubscribers,r.notifySubscribers=p);var a=e(function(){r._notificationIsPending=!1,s&&o===r&&(o=r._evalIfChanged?r._evalIfChanged():r());var e=n||r.isDifferent(i,o);n=t=!1,e&&r._origNotifySubscribers(i=o)});r._limitChange=function(e){r._changeSubscriptions=r._subscriptions[v].slice(0),r._notificationIsPending=t=!0,o=e,a()},r._limitBeforeChange=function(e){t||(i=e,r._origNotifySubscribers(e,"beforeChange"))},r._notifyNextChangeIfValueIsDifferent=function(){r.isDifferent(i,r.peek(!0))&&(n=!0)}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e)return this._subscriptions[e]&&this._subscriptions[e].length||0;var t=0;return b.utils.objectForEach(this._subscriptions,function(e,n){"dirty"!==e&&(t+=n.length)}),t},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:r};b.exportProperty(y,"subscribe",y.subscribe),b.exportProperty(y,"extend",y.extend),b.exportProperty(y,"getSubscriptionsCount",y.getSubscriptionsCount),b.utils.canSetPrototype&&b.utils.setPrototypeOf(y,Function.prototype),b.subscribable.fn=y,b.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},b.exportSymbol("subscribable",b.subscribable),b.exportSymbol("isSubscribable",b.isSubscribable),b.computedContext=b.dependencyDetection=function(){function e(){return++r}function t(e){o.push(i),i=e}function n(){i=o.pop()}var i,o=[],r=0;return{begin:t,end:n,registerDependency:function(t){if(i){if(!b.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");i.callback.call(i.callbackTarget,t,t._id||(t._id=e()))}},ignore:function(e,i,o){try{return t(),e.apply(i,o||[])}finally{n()}},getDependenciesCount:function(){if(i)return i.computed.getDependenciesCount()},isInitial:function(){if(i)return i.isInitial}}}(),b.exportSymbol("computedContext",b.computedContext),b.exportSymbol("computedContext.getDependenciesCount",b.computedContext.getDependenciesCount),b.exportSymbol("computedContext.isInitial",b.computedContext.isInitial),b.exportSymbol("ignoreDependencies",b.ignoreDependencies=b.dependencyDetection.ignore);var w=b.utils.createSymbolOrString("_latestValue");b.observable=function(e){function t(){return arguments.length>0?(t.isDifferent(t[w],arguments[0])&&(t.valueWillMutate(),t[w]=arguments[0],t.valueHasMutated()),this):(b.dependencyDetection.registerDependency(t),t[w])}return t[w]=e,b.utils.canSetPrototype||b.utils.extend(t,b.subscribable.fn),b.subscribable.fn.init(t),b.utils.setPrototypeOfOrExtend(t,k),b.options.deferUpdates&&b.extenders.deferred(t,!0),t};var k={equalityComparer:n,peek:function(){return this[w]},valueHasMutated:function(){this.notifySubscribers(this[w])},valueWillMutate:function(){this.notifySubscribers(this[w],"beforeChange")}};b.utils.canSetPrototype&&b.utils.setPrototypeOf(k,b.subscribable.fn);var E=b.observable.protoProperty="__ko_proto__";k[E]=b.observable,b.hasPrototype=function(e,t){return null!==e&&e!==s&&e[E]!==s&&(e[E]===t||b.hasPrototype(e[E],t))},b.isObservable=function(e){return b.hasPrototype(e,b.observable)},b.isWriteableObservable=function(e){return"function"==typeof e&&e[E]===b.observable||!("function"!=typeof e||e[E]!==b.dependentObservable||!e.hasWriteFunction)},b.exportSymbol("observable",b.observable),b.exportSymbol("isObservable",b.isObservable),b.exportSymbol("isWriteableObservable",b.isWriteableObservable),b.exportSymbol("isWritableObservable",b.isWriteableObservable),b.exportSymbol("observable.fn",k),b.exportProperty(k,"peek",k.peek),b.exportProperty(k,"valueHasMutated",k.valueHasMutated),b.exportProperty(k,"valueWillMutate",k.valueWillMutate),b.observableArray=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=b.observable(e);return b.utils.setPrototypeOfOrExtend(t,b.observableArray.fn),t.extend({trackArrayChanges:!0})},b.observableArray.fn={remove:function(e){for(var t=this.peek(),n=[],i="function"!=typeof e||b.isObservable(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];i(r)&&(0===n.length&&this.valueWillMutate(),n.push(r),t.splice(o,1),o--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===s){var t=this.peek(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return b.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this.peek(),n="function"!=typeof e||b.isObservable(e)?function(t){return t===e}:e;this.valueWillMutate();for(var i=t.length-1;i>=0;i--){n(t[i])&&(t[i]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===s?this.destroy(function(){return!0}):e?this.destroy(function(t){return b.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return b.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},b.utils.canSetPrototype&&b.utils.setPrototypeOf(b.observableArray.fn,b.observable.fn),b.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){b.observableArray.fn[e]=function(){var t=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(t,e,arguments);var n=t[e].apply(t,arguments);return this.valueHasMutated(),n===t?this:n}}),b.utils.arrayForEach(["slice"],function(e){b.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),b.exportSymbol("observableArray",b.observableArray);var x="arrayChange";b.extenders.trackArrayChanges=function(e,t){function n(){if(!a){a=!0,r=e.notifySubscribers,e.notifySubscribers=function(e,t){return t&&t!==v||++l,r.apply(this,arguments)};var t=[].concat(e.peek()||[]);u=null,o=e.subscribe(function(n){if(n=[].concat(n||[]),e.hasSubscriptionsForEvent(x))var o=i(t,n);t=n,u=null,l=0,o&&o.length&&e.notifySubscribers(o,x)})}}function i(t,n){return(!u||l>1)&&(u=b.utils.compareArrays(t,n,e.compareArrayOptions)),u}if(e.compareArrayOptions={},t&&"object"==typeof t&&b.utils.extend(e.compareArrayOptions,t),e.compareArrayOptions.sparse=!0,!e.cacheDiffForKnownOperation){var o,r,a=!1,u=null,l=0,c=e.beforeSubscriptionAdd,d=e.afterSubscriptionRemove;e.beforeSubscriptionAdd=function(t){c&&c.call(e,t),t===x&&n()},e.afterSubscriptionRemove=function(t){d&&d.call(e,t),t!==x||e.hasSubscriptionsForEvent(x)||(r&&(e.notifySubscribers=r,r=s),o.dispose(),a=!1)},e.cacheDiffForKnownOperation=function(e,t,n){function i(e,t,n){return o[o.length]={status:e,value:t,index:n}}if(a&&!l){var o=[],r=e.length,s=n.length,c=0;switch(t){case"push":c=r;case"unshift":for(var d=0;d<s;d++)i("added",n[d],c+d);break;case"pop":c=r-1;case"shift":r&&i("deleted",e[c],c);break;case"splice":for(var p=Math.min(Math.max(0,n[0]<0?r+n[0]:n[0]),r),f=1===s?r:Math.min(p+(n[1]||0),r),h=p+s-2,m=Math.max(f,h),g=[],v=[],d=p,y=2;d<m;++d,++y)d<f&&v.push(i("deleted",e[d],d)),d<h&&g.push(i("added",n[y],d));b.utils.findMovesInArrayComparison(v,g);break;default:return}u=o}}}};var T=b.utils.createSymbolOrString("_state");b.computed=b.dependentObservable=function(e,t,n){function i(){if(arguments.length>0){if("function"!=typeof o)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return o.apply(r.evaluatorFunctionTarget,arguments),this}return b.dependencyDetection.registerDependency(i),(r.isDirty||r.isSleeping&&i.haveDependenciesChanged())&&i.evaluateImmediate(),r.latestValue}if("object"==typeof e?n=e:(n=n||{},e&&(n.read=e)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var o=n.write,r={latestValue:s,isStale:!0,isDirty:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:n.read,evaluatorFunctionTarget:t||n.owner,disposeWhenNodeIsRemoved:n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,disposeWhen:n.disposeWhen||n.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};return i[T]=r,i.hasWriteFunction="function"==typeof o,b.utils.canSetPrototype||b.utils.extend(i,b.subscribable.fn),b.subscribable.fn.init(i),b.utils.setPrototypeOfOrExtend(i,C),n.pure?(r.pure=!0,r.isSleeping=!0,b.utils.extend(i,S)):n.deferEvaluation&&b.utils.extend(i,N),b.options.deferUpdates&&b.extenders.deferred(i,!0),i._options=n,r.disposeWhenNodeIsRemoved&&(r.suppressDisposalUntilDisposeWhenReturnsFalse=!0,r.disposeWhenNodeIsRemoved.nodeType||(r.disposeWhenNodeIsRemoved=null)),r.isSleeping||n.deferEvaluation||i.evaluateImmediate(),r.disposeWhenNodeIsRemoved&&i.isActive()&&b.utils.domNodeDisposal.addDisposeCallback(r.disposeWhenNodeIsRemoved,r.domNodeDisposalCallback=function(){i.dispose()}),i};var C={equalityComparer:n,getDependenciesCount:function(){return this[T].dependenciesCount},addDependencyTracking:function(e,t,n){if(this[T].pure&&t===this)throw Error("A 'pure' computed must not be called recursively");this[T].dependencyTracking[e]=n,n._order=this[T].dependenciesCount++,n._version=t.getVersion()},haveDependenciesChanged:function(){var e,t,n=this[T].dependencyTracking;for(e in n)if(n.hasOwnProperty(e)&&(t=n[e],this._evalDelayed&&t._target._notificationIsPending||t._target.hasChanged(t._version)))return!0},markDirty:function(){this._evalDelayed&&!this[T].isBeingEvaluated&&this._evalDelayed(!1)},isActive:function(){var e=this[T];return e.isDirty||e.dependenciesCount>0},respondToChange:function(){this._notificationIsPending?this[T].isDirty&&(this[T].isStale=!0):this.evaluatePossiblyAsync()},subscribeToDependency:function(e){if(e._deferUpdates&&!this[T].disposeWhenNodeIsRemoved){var t=e.subscribe(this.markDirty,this,"dirty"),n=e.subscribe(this.respondToChange,this);return{_target:e,dispose:function(){t.dispose(),n.dispose()}}}return e.subscribe(this.evaluatePossiblyAsync,this)},evaluatePossiblyAsync:function(){var e=this,t=e.throttleEvaluation;t&&t>=0?(clearTimeout(this[T].evaluationTimeoutInstance),this[T].evaluationTimeoutInstance=b.utils.setTimeout(function(){e.evaluateImmediate(!0)},t)):e._evalDelayed?e._evalDelayed(!0):e.evaluateImmediate(!0)},evaluateImmediate:function(e){var t=this,n=t[T],i=n.disposeWhen,o=!1;if(!n.isBeingEvaluated&&!n.isDisposed){if(n.disposeWhenNodeIsRemoved&&!b.utils.domNodeIsAttachedToDocument(n.disposeWhenNodeIsRemoved)||i&&i()){if(!n.suppressDisposalUntilDisposeWhenReturnsFalse)return void t.dispose()}else n.suppressDisposalUntilDisposeWhenReturnsFalse=!1;n.isBeingEvaluated=!0;try{o=this.evaluateImmediate_CallReadWithDependencyDetection(e)}finally{n.isBeingEvaluated=!1}return n.dependenciesCount||t.dispose(),o}},evaluateImmediate_CallReadWithDependencyDetection:function(e){var t=this,n=t[T],i=!1,o=n.pure?s:!n.dependenciesCount,r={computedObservable:t,disposalCandidates:n.dependencyTracking,disposalCount:n.dependenciesCount};b.dependencyDetection.begin({callbackTarget:r,callback:h,computed:t,isInitial:o}),n.dependencyTracking={},n.dependenciesCount=0;var a=this.evaluateImmediate_CallReadThenEndDependencyDetection(n,r);return t.isDifferent(n.latestValue,a)&&(n.isSleeping||t.notifySubscribers(n.latestValue,"beforeChange"),n.latestValue=a,t._latestValue=a,n.isSleeping?t.updateVersion():e&&t.notifySubscribers(n.latestValue),i=!0),o&&t.notifySubscribers(n.latestValue,"awake"),i},evaluateImmediate_CallReadThenEndDependencyDetection:function(e,t){try{var n=e.readFunction;return e.evaluatorFunctionTarget?n.call(e.evaluatorFunctionTarget):n()}finally{b.dependencyDetection.end(),t.disposalCount&&!e.isSleeping&&b.utils.objectForEach(t.disposalCandidates,f),e.isStale=e.isDirty=!1}},peek:function(e){var t=this[T];return(t.isDirty&&(e||!t.dependenciesCount)||t.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),t.latestValue},limit:function(e){b.subscribable.fn.limit.call(this,e),this._evalIfChanged=function(){return this[T].isStale?this.evaluateImmediate():this[T].isDirty=!1,this[T].latestValue},this._evalDelayed=function(e){this._limitBeforeChange(this[T].latestValue),this[T].isDirty=!0,e&&(this[T].isStale=!0),this._limitChange(this)}},dispose:function(){var e=this[T];!e.isSleeping&&e.dependencyTracking&&b.utils.objectForEach(e.dependencyTracking,function(e,t){t.dispose&&t.dispose()}),e.disposeWhenNodeIsRemoved&&e.domNodeDisposalCallback&&b.utils.domNodeDisposal.removeDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback),e.dependencyTracking=null,e.dependenciesCount=0,e.isDisposed=!0,e.isStale=!1,e.isDirty=!1,e.isSleeping=!1,e.disposeWhenNodeIsRemoved=null}},S={beforeSubscriptionAdd:function(e){var t=this,n=t[T];if(!n.isDisposed&&n.isSleeping&&"change"==e){if(n.isSleeping=!1,n.isStale||t.haveDependenciesChanged())n.dependencyTracking=null,n.dependenciesCount=0,t.evaluateImmediate()&&t.updateVersion();else{var i=[];b.utils.objectForEach(n.dependencyTracking,function(e,t){i[t._order]=e}),b.utils.arrayForEach(i,function(e,i){var o=n.dependencyTracking[e],r=t.subscribeToDependency(o._target);r._order=i,r._version=o._version,n.dependencyTracking[e]=r})}n.isDisposed||t.notifySubscribers(n.latestValue,"awake")}},afterSubscriptionRemove:function(e){var t=this[T];t.isDisposed||"change"!=e||this.hasSubscriptionsForEvent("change")||(b.utils.objectForEach(t.dependencyTracking,function(e,n){n.dispose&&(t.dependencyTracking[e]={_target:n._target,_order:n._order,_version:n._version},n.dispose())}),t.isSleeping=!0,this.notifySubscribers(s,"asleep"))},getVersion:function(){var e=this[T];return e.isSleeping&&(e.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),b.subscribable.fn.getVersion.call(this)}},N={beforeSubscriptionAdd:function(e){"change"!=e&&"beforeChange"!=e||this.peek()}};b.utils.canSetPrototype&&b.utils.setPrototypeOf(C,b.subscribable.fn);var _=b.observable.protoProperty;b.computed[_]=b.observable,C[_]=b.computed,b.isComputed=function(e){return b.hasPrototype(e,b.computed)},b.isPureComputed=function(e){return b.hasPrototype(e,b.computed)&&e[T]&&e[T].pure},b.exportSymbol("computed",b.computed),b.exportSymbol("dependentObservable",b.computed),b.exportSymbol("isComputed",b.isComputed),b.exportSymbol("isPureComputed",b.isPureComputed),b.exportSymbol("computed.fn",C),b.exportProperty(C,"peek",C.peek),b.exportProperty(C,"dispose",C.dispose),b.exportProperty(C,"isActive",C.isActive),b.exportProperty(C,"getDependenciesCount",C.getDependenciesCount),b.pureComputed=function(e,t){return"function"==typeof e?b.computed(e,t,{pure:!0}):(e=b.utils.extend({},e),e.pure=!0,b.computed(e,t))},b.exportSymbol("pureComputed",b.pureComputed),function(){function e(i,o,r){if(r=r||new n,!!("object"!=typeof(i=o(i))||null===i||i===s||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean))return i;var a=i instanceof Array?[]:{};return r.save(i,a),t(i,function(t){var n=o(i[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":a[t]=n;break;case"object":case"undefined":var u=r.get(n);a[t]=u!==s?u:e(n,o,r)}}),a}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var i in e)t(i)}function n(){this.keys=[],this.values=[]}b.toJS=function(t){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;b.isObservable(e)&&t<10;t++)e=e();return e})},b.toJSON=function(e,t,n){var i=b.toJS(e);return b.utils.stringifyJson(i,t,n)},n.prototype={constructor:n,save:function(e,t){var n=b.utils.arrayIndexOf(this.keys,e);n>=0?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var t=b.utils.arrayIndexOf(this.keys,e);return t>=0?this.values[t]:s}}}(),b.exportSymbol("toJS",b.toJS),b.exportSymbol("toJSON",b.toJSON),function(){b.selectExtensions={readValue:function(e){switch(b.utils.tagNameLower(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?b.utils.domData.get(e,b.bindingHandlers.options.optionValueDomDataKey):b.utils.ieVersion<=7?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return e.selectedIndex>=0?b.selectExtensions.readValue(e.options[e.selectedIndex]):s;default:return e.value}},writeValue:function(e,t,n){switch(b.utils.tagNameLower(e)){case"option":switch(typeof t){case"string":b.utils.domData.set(e,b.bindingHandlers.options.optionValueDomDataKey,s),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:b.utils.domData.set(e,b.bindingHandlers.options.optionValueDomDataKey,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":""!==t&&null!==t||(t=s);for(var i,o=-1,r=0,a=e.options.length;r<a;++r)if((i=b.selectExtensions.readValue(e.options[r]))==t||""==i&&t===s){o=r;break}(n||o>=0||t===s&&e.size>1)&&(e.selectedIndex=o);break;default:null!==t&&t!==s||(t=""),e.value=t}}}}(),b.exportSymbol("selectExtensions",b.selectExtensions),b.exportSymbol("selectExtensions.readValue",b.selectExtensions.readValue),b.exportSymbol("selectExtensions.writeValue",b.selectExtensions.writeValue),b.expressionRewriting=function(){function e(e){if(b.utils.arrayIndexOf(i,e)>=0)return!1;var t=e.match(o);return null!==t&&(t[1]?"Object("+t[1]+")"+t[2]:e)}function t(e){var t=b.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,i=[],o=t.match(r),u=[],l=0;if(o){o.push(",");for(var c,d=0;c=o[d];++d){var p=c.charCodeAt(0);if(44===p){if(l<=0){i.push(n&&u.length?{key:n,value:u.join("")}:{unknown:n||u.join("")}),n=l=0,u=[];continue}}else if(58===p){if(!l&&!n&&1===u.length){n=u.pop();continue}}else if(47===p&&d&&c.length>1){var f=o[d-1].match(s);f&&!a[f[0]]&&(t=t.substr(t.indexOf(c)+1),o=t.match(r),o.push(","),d=-1,c="/")}else 40===p||123===p||91===p?++l:41===p||125===p||93===p?--l:n||u.length||34!==p&&39!==p||(c=c.slice(1,-1));u.push(c)}}return i}function n(n,i){function o(t,n){var i;if(!l){if(!function(e){return!e||!e.preprocess||(n=e.preprocess(n,t,o))}(b.getBindingHandler(t)))return;u[t]&&(i=e(n))&&s.push("'"+t+"':function(_z){"+i+"=_z}")}a&&(n="function(){return "+n+" }"),r.push("'"+t+"':"+n)}i=i||{};var r=[],s=[],a=i.valueAccessors,l=i.bindingParams,c="string"==typeof n?t(n):n;return b.utils.arrayForEach(c,function(e){o(e.key||e.unknown,e.value)}),s.length&&o("_ko_property_writers","{"+s.join(",")+" }"),r.join(",")}var i=["true","false","null","undefined"],o=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),s=/[\])"'A-Za-z0-9_$]+$/,a={in:1,return:1,typeof:1},u={};return{bindingRewriteValidators:[],twoWayBindings:u,parseObjectLiteral:t,preProcessBindings:n,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,i,o){if(e&&b.isObservable(e))!b.isWriteableObservable(e)||o&&e.peek()===i||e(i);else{var r=t.get("_ko_property_writers");r&&r[n]&&r[n](i)}}}}(),b.exportSymbol("expressionRewriting",b.expressionRewriting),b.exportSymbol("expressionRewriting.bindingRewriteValidators",b.expressionRewriting.bindingRewriteValidators),b.exportSymbol("expressionRewriting.parseObjectLiteral",b.expressionRewriting.parseObjectLiteral),b.exportSymbol("expressionRewriting.preProcessBindings",b.expressionRewriting.preProcessBindings),b.exportSymbol("expressionRewriting._twoWayBindings",b.expressionRewriting.twoWayBindings),b.exportSymbol("jsonExpressionRewriting",b.expressionRewriting),b.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",b.expressionRewriting.preProcessBindings),function(){function e(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function n(n,i){for(var o=n,r=1,s=[];o=o.nextSibling;){if(t(o)&&0===--r)return s;s.push(o),e(o)&&r++}if(!i)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(e,t){var i=n(e,t);return i?i.length>0?i[i.length-1].nextSibling:e.nextSibling:null}function o(n){var o=n.firstChild,r=null;if(o)do{if(r)r.push(o);else if(e(o)){var s=i(o,!0);s?o=s:r=[o]}else t(o)&&(r=[o])}while(o=o.nextSibling);return r}var r=u&&"\x3c!--test--\x3e"===u.createComment("test").text,s=r?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};b.virtualElements={allowedBindings:{},childNodes:function(t){return e(t)?n(t):t.childNodes},emptyNode:function(t){if(e(t))for(var n=b.virtualElements.childNodes(t),i=0,o=n.length;i<o;i++)b.removeNode(n[i]);else b.utils.emptyDomNode(t)},setDomNodeChildren:function(t,n){if(e(t)){b.virtualElements.emptyNode(t);for(var i=t.nextSibling,o=0,r=n.length;o<r;o++)i.parentNode.insertBefore(n[o],i)}else b.utils.setDomNodeChildren(t,n)},prepend:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},insertAfter:function(t,n,i){i?e(t)?t.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?t.insertBefore(n,i.nextSibling):t.appendChild(n):b.virtualElements.prepend(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=i(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},hasBindingValue:e,virtualNodeBindingValue:function(e){var t=(r?e.text:e.nodeValue).match(s);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(l[b.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do{if(1===t.nodeType){var n=o(t);if(n)for(var i=t.nextSibling,r=0;r<n.length;r++)i?e.insertBefore(n[r],i):e.appendChild(n[r])}}while(t=t.nextSibling)}}}}(),b.exportSymbol("virtualElements",b.virtualElements),b.exportSymbol("virtualElements.allowedBindings",b.virtualElements.allowedBindings),b.exportSymbol("virtualElements.emptyNode",b.virtualElements.emptyNode),b.exportSymbol("virtualElements.insertAfter",b.virtualElements.insertAfter),b.exportSymbol("virtualElements.prepend",b.virtualElements.prepend),b.exportSymbol("virtualElements.setDomNodeChildren",b.virtualElements.setDomNodeChildren),function(){function e(e,n,i){var o=e+(i&&i.valueAccessors||"");return n[o]||(n[o]=t(e,i))}function t(e,t){var n=b.expressionRewriting.preProcessBindings(e,t),i="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",i)}b.bindingProvider=function(){this.bindingCache={}},b.utils.extend(b.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||b.components.getComponentNameForNode(e);case 8:return b.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),i=n?this.parseBindingsString(n,t,e):null;return b.components.addBindingsForCustomElement(i,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),i=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return b.components.addBindingsForCustomElement(i,e,t,!0)},getBindingsString:function(e,t){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return b.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,n,i,o){try{return e(t,this.bindingCache,o)(n,i)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),b.bindingProvider.instance=new b.bindingProvider}(),b.exportSymbol("bindingProvider",b.bindingProvider),function(){function e(e){return function(){return e}}function t(e){return e()}function n(e){return b.utils.objectMap(b.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function i(t,i,o){return"function"==typeof t?n(t.bind(null,i,o)):b.utils.objectMap(t,e)}function o(e,t){return n(this.getBindings.bind(this,e,t))}function r(e){if(!b.virtualElements.allowedBindings[e])throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function u(e,t,n){var i,o=b.virtualElements.firstChild(t),r=b.bindingProvider.instance,s=r.preprocessNode;if(s){for(;i=o;)o=b.virtualElements.nextSibling(i),s.call(r,i);o=b.virtualElements.firstChild(t)}for(;i=o;)o=b.virtualElements.nextSibling(i),l(e,i,n)}function l(e,t,n){var i=!0,o=1===t.nodeType;o&&b.virtualElements.normaliseVirtualElementDomStructure(t),(o&&n||b.bindingProvider.instance.nodeHasBindings(t))&&(i=p(t,null,e,n).shouldBindDescendants),i&&!h[b.utils.tagNameLower(t)]&&u(e,t,!o)}function d(e){var t=[],n={},i=[];return b.utils.objectForEach(e,function o(r){if(!n[r]){var s=b.getBindingHandler(r);s&&(s.after&&(i.push(r),b.utils.arrayForEach(s.after,function(t){if(e[t]){if(-1!==b.utils.arrayIndexOf(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));o(t)}}),i.length--),t.push({key:r,handler:s})),n[r]=!0}}),t}function p(e,n,i,a){function u(){return b.utils.objectMap(h?h():c,t)}var l=b.utils.domData.get(e,m);if(!n){if(l)throw Error("You cannot apply bindings multiple times to the same element.");b.utils.domData.set(e,m,!0)}!l&&a&&b.storedBindingContextForNode(e,i);var c;if(n&&"function"!=typeof n)c=n;else{var p=b.bindingProvider.instance,f=p.getBindingAccessors||o,h=b.dependentObservable(function(){return c=n?n(i,e):f.call(p,e,i),c&&i._subscribable&&i._subscribable(),c},null,{disposeWhenNodeIsRemoved:e});c&&h.isActive()||(h=null)}var g;if(c){var v=h?function(e){return function(){return t(h()[e])}}:function(e){return c[e]};u.get=function(e){return c[e]&&t(v(e))},u.has=function(e){return e in c};var y=d(c);b.utils.arrayForEach(y,function(t){var n=t.handler.init,o=t.handler.update,a=t.key;8===e.nodeType&&r(a);try{"function"==typeof n&&b.dependencyDetection.ignore(function(){var t=n(e,v(a),u,i.$data,i);if(t&&t.controlsDescendantBindings){if(g!==s)throw new Error("Multiple bindings ("+g+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");g=a}}),"function"==typeof o&&b.dependentObservable(function(){o(e,v(a),u,i.$data,i)},null,{disposeWhenNodeIsRemoved:e})}catch(e){throw e.message='Unable to process binding "'+a+": "+c[a]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:g===s}}function f(e){return e&&e instanceof b.bindingContext?e:new b.bindingContext(e)}b.bindingHandlers={};var h={script:!0,textarea:!0,template:!0};b.getBindingHandler=function(e){return b.bindingHandlers[e]},b.bindingContext=function(e,t,n,i,o){function r(){var o=d?e():e,r=b.utils.unwrapObservable(o);return t?(t._subscribable&&t._subscribable(),b.utils.extend(c,t),c._subscribable=l):(c.$parents=[],c.$root=r,c.ko=b),c.$rawData=o,c.$data=r,n&&(c[n]=r),i&&i(c,t,r),c.$data}function a(){return u&&!b.utils.anyDomNodeIsAttachedToDocument(u)}var u,l,c=this,d="function"==typeof e&&!b.isObservable(e);o&&o.exportDependencies?r():(l=b.dependentObservable(r,null,{disposeWhen:a,disposeWhenNodeIsRemoved:!0}),l.isActive()&&(c._subscribable=l,l.equalityComparer=null,u=[],l._addNode=function(e){u.push(e),b.utils.domNodeDisposal.addDisposeCallback(e,function(e){b.utils.arrayRemoveItem(u,e),u.length||(l.dispose(),c._subscribable=l=s)})}))},b.bindingContext.prototype.createChildContext=function(e,t,n,i){return new b.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)},i)},b.bindingContext.prototype.extend=function(e){return new b.bindingContext(this._subscribable||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,b.utils.extend(t,"function"==typeof e?e():e)})},b.bindingContext.prototype.createStaticChildContext=function(e,t){return this.createChildContext(e,t,null,{exportDependencies:!0})};var m=b.utils.domData.nextKey(),g=b.utils.domData.nextKey();b.storedBindingContextForNode=function(e,t){if(2!=arguments.length)return b.utils.domData.get(e,g);b.utils.domData.set(e,g,t),t._subscribable&&t._subscribable._addNode(e)},b.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&b.virtualElements.normaliseVirtualElementDomStructure(e),p(e,t,f(n),!0)},b.applyBindingsToNode=function(e,t,n){var o=f(n);return b.applyBindingAccessorsToNode(e,i(t,o,e),o)},b.applyBindingsToDescendants=function(e,t){1!==t.nodeType&&8!==t.nodeType||u(f(e),t,!0)},b.applyBindings=function(e,t){if(!c&&a.jQuery&&(c=a.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||a.document.body,l(f(e),t,!0)},b.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=b.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return b.contextFor(e.parentNode)}return s},b.dataFor=function(e){var t=b.contextFor(e);return t?t.$data:s},b.exportSymbol("bindingHandlers",b.bindingHandlers),b.exportSymbol("applyBindings",b.applyBindings),b.exportSymbol("applyBindingsToDescendants",b.applyBindingsToDescendants),b.exportSymbol("applyBindingAccessorsToNode",b.applyBindingAccessorsToNode),b.exportSymbol("applyBindingsToNode",b.applyBindingsToNode),b.exportSymbol("contextFor",b.contextFor),b.exportSymbol("dataFor",b.dataFor)}(),function(e){function t(t,n){return t.hasOwnProperty(n)?t[n]:e}function n(e,n){var o,a=t(r,e);a?a.subscribe(n):(a=r[e]=new b.subscribable,a.subscribe(n),i(e,function(t,n){var i=!(!n||!n.synchronous);s[e]={definition:t,isSynchronousComponent:i},delete r[e],o||i?a.notifySubscribers(t):b.tasks.schedule(function(){a.notifySubscribers(t)})}),o=!0)}function i(e,t){o("getConfig",[e],function(n){n?o("loadComponent",[e,n],function(e){t(e,n)}):t(null,null)})}function o(t,n,i,r){r||(r=b.components.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var u=!1;if(a.apply(s,n.concat(function(e){u?i(null):null!==e?i(e):o(t,n,i,r)}))!==e&&(u=!0,!s.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else o(t,n,i,r)}else i(null)}var r={},s={};b.components={get:function(e,i){var o=t(s,e);o?o.isSynchronousComponent?b.dependencyDetection.ignore(function(){i(o.definition)}):b.tasks.schedule(function(){i(o.definition)}):n(e,i)},clearCachedDefinition:function(e){delete s[e]},_getFirstResultFromLoaders:o},b.components.loaders=[],b.exportSymbol("components",b.components),b.exportSymbol("components.get",b.components.get),b.exportSymbol("components.clearCachedDefinition",b.components.clearCachedDefinition)}(),function(e){function n(e,t,n,i){var o={},r=2,s=function(){0==--r&&i(o)},a=n.template,u=n.viewModel;a?c(t,a,function(t){b.components._getFirstResultFromLoaders("loadTemplate",[e,t],function(e){o.template=e,s()})}):s(),u?c(t,u,function(t){b.components._getFirstResultFromLoaders("loadViewModel",[e,t],function(e){o[f]=e,s()})}):s()}function i(e,t,n){if("string"==typeof t)n(b.utils.parseHtmlFragment(t));else if(t instanceof Array)n(t);else if(l(t))n(b.utils.makeArray(t.childNodes));else if(t.element){var i=t.element;if(s(i))n(r(i));else if("string"==typeof i){var o=u.getElementById(i);o?n(r(o)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i)}else e("Unknown template value: "+t)}function o(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[f])n(t[f]);else if("instance"in t){var i=t.instance;n(function(e,t){return i})}else"viewModel"in t?o(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function r(e){switch(b.utils.tagNameLower(e)){case"script":return b.utils.parseHtmlFragment(e.text);case"textarea":return b.utils.parseHtmlFragment(e.value);case"template":if(l(e.content))return b.utils.cloneNodes(e.content.childNodes)}return b.utils.cloneNodes(e.childNodes)}function s(e){return a.HTMLElement?e instanceof HTMLElement:e&&e.tagName&&1===e.nodeType}function l(e){return a.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function c(e,n,i){"string"==typeof n.require?t||a.require?(t||a.require)([n.require],i):e("Uses require, but no AMD loader is present"):i(n)}function d(e){return function(t){throw new Error("Component '"+e+"': "+t)}}var p={};b.components.register=function(e,t){if(!t)throw new Error("Invalid configuration for "+e);if(b.components.isRegistered(e))throw new Error("Component "+e+" is already registered");p[e]=t},b.components.isRegistered=function(e){return p.hasOwnProperty(e)},b.components.unregister=function(e){delete p[e],b.components.clearCachedDefinition(e)},b.components.defaultLoader={getConfig:function(e,t){t(p.hasOwnProperty(e)?p[e]:null)},loadComponent:function(e,t,i){var o=d(e);c(o,t,function(t){n(e,o,t,i)})},loadTemplate:function(e,t,n){i(d(e),t,n)},loadViewModel:function(e,t,n){o(d(e),t,n)}};var f="createViewModel";b.exportSymbol("components.register",b.components.register),b.exportSymbol("components.isRegistered",b.components.isRegistered),b.exportSymbol("components.unregister",b.components.unregister),b.exportSymbol("components.defaultLoader",b.components.defaultLoader),b.components.loaders.push(b.components.defaultLoader),b.components._allRegisteredComponents=p}(),function(e){function t(e,t){var i=e.getAttribute("params");if(i){var o=n.parseBindingsString(i,t,e,{valueAccessors:!0,bindingParams:!0}),r=b.utils.objectMap(o,function(t,n){return b.computed(t,null,{disposeWhenNodeIsRemoved:e})}),s=b.utils.objectMap(r,function(t,n){var i=t.peek();return t.isActive()?b.computed({read:function(){return b.utils.unwrapObservable(t())},write:b.isWriteableObservable(i)&&function(e){t()(e)},disposeWhenNodeIsRemoved:e}):i});return s.hasOwnProperty("$raw")||(s.$raw=r),s}return{$raw:{}}}b.components.getComponentNameForNode=function(e){var t=b.utils.tagNameLower(e);if(b.components.isRegistered(t)&&(-1!=t.indexOf("-")||""+e=="[object HTMLUnknownElement]"||b.utils.ieVersion<=8&&e.tagName===t))return t},b.components.addBindingsForCustomElement=function(e,n,i,o){if(1===n.nodeType){var r=b.components.getComponentNameForNode(n);if(r){if(e=e||{},e.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:t(n,i)};e.component=o?function(){return s}:s}}return e};var n=new b.bindingProvider;b.utils.ieVersion<9&&(b.components.register=function(e){return function(t){return u.createElement(t),e.apply(this,arguments)}}(b.components.register),u.createDocumentFragment=function(e){return function(){var t=e(),n=b.components._allRegisteredComponents;for(var i in n)n.hasOwnProperty(i)&&t.createElement(i);return t}}(u.createDocumentFragment))}(),function(e){function t(e,t,n){var i=t.template;if(!i)throw new Error("Component '"+e+"' has no template");var o=b.utils.cloneNodes(i);b.virtualElements.setDomNodeChildren(n,o)}function n(e,t,n,i){var o=e.createViewModel;return o?o.call(e,i,{element:t,templateNodes:n}):i}var i=0;b.bindingHandlers.component={init:function(e,o,r,s,a){var u,l,c=function(){var e=u&&u.dispose;"function"==typeof e&&e.call(u),u=null,l=null},d=b.utils.makeArray(b.virtualElements.childNodes(e));return b.utils.domNodeDisposal.addDisposeCallback(e,c),b.computed(function(){var r,s,p=b.utils.unwrapObservable(o());if("string"==typeof p?r=p:(r=b.utils.unwrapObservable(p.name),s=b.utils.unwrapObservable(p.params)),!r)throw new Error("No component name specified");var f=l=++i;b.components.get(r,function(i){if(l===f){if(c(),!i)throw new Error("Unknown component '"+r+"'");t(r,i,e);var o=n(i,e,d,s),p=a.createChildContext(o,void 0,function(e){e.$component=o,e.$componentTemplateNodes=d});u=o,b.applyBindingsToDescendants(p,e)}})},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},b.virtualElements.allowedBindings.component=!0}();var O={class:"className",for:"htmlFor"};b.bindingHandlers.attr={update:function(e,t,n){var i=b.utils.unwrapObservable(t())||{};b.utils.objectForEach(i,function(t,n){n=b.utils.unwrapObservable(n);var i=!1===n||null===n||n===s;i&&e.removeAttribute(t),b.utils.ieVersion<=8&&t in O?(t=O[t],i?e.removeAttribute(t):e[t]=n):i||e.setAttribute(t,n.toString()),"name"===t&&b.utils.setElementName(e,i?"":n.toString())})}},function(){b.bindingHandlers.checked={after:["value","attr"],init:function(e,t,n){function i(){var i=e.checked,o=f?r():i;if(!b.computedContext.isInitial()&&(!u||i)){var s=b.dependencyDetection.ignore(t);if(c){var a=d?s.peek():s;p!==o?(i&&(b.utils.addOrRemoveItem(a,o,!0),b.utils.addOrRemoveItem(a,p,!1)),p=o):b.utils.addOrRemoveItem(a,o,i),d&&b.isWriteableObservable(s)&&s(a)}else b.expressionRewriting.writeValueToProperty(s,n,"checked",o,!0)}}function o(){var n=b.utils.unwrapObservable(t());e.checked=c?b.utils.arrayIndexOf(n,r())>=0:a?n:r()===n}var r=b.pureComputed(function(){return n.has("checkedValue")?b.utils.unwrapObservable(n.get("checkedValue")):n.has("value")?b.utils.unwrapObservable(n.get("value")):e.value}),a="checkbox"==e.type,u="radio"==e.type;if(a||u){var l=t(),c=a&&b.utils.unwrapObservable(l)instanceof Array,d=!(c&&l.push&&l.splice),p=c?r():s,f=u||c;u&&!e.name&&b.bindingHandlers.uniqueName.init(e,function(){return!0}),b.computed(i,null,{disposeWhenNodeIsRemoved:e}),b.utils.registerEventHandler(e,"click",i),b.computed(o,null,{disposeWhenNodeIsRemoved:e}),l=s}}},b.expressionRewriting.twoWayBindings.checked=!0,b.bindingHandlers.checkedValue={update:function(e,t){e.value=b.utils.unwrapObservable(t())}}}();b.bindingHandlers.css={update:function(e,t){var n=b.utils.unwrapObservable(t());null!==n&&"object"==typeof n?b.utils.objectForEach(n,function(t,n){n=b.utils.unwrapObservable(n),b.utils.toggleDomNodeCssClass(e,t,n)}):(n=b.utils.stringTrim(String(n||"")),b.utils.toggleDomNodeCssClass(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,b.utils.toggleDomNodeCssClass(e,n,!0))}},b.bindingHandlers.enable={update:function(e,t){var n=b.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},b.bindingHandlers.disable={update:function(e,t){b.bindingHandlers.enable.update(e,function(){return!b.utils.unwrapObservable(t())})}},b.bindingHandlers.event={init:function(e,t,n,i,o){var r=t()||{};b.utils.objectForEach(r,function(r){"string"==typeof r&&b.utils.registerEventHandler(e,r,function(e){var s,a=t()[r];if(a){try{var u=b.utils.makeArray(arguments);i=o.$data,u.unshift(i),s=a.apply(i,u)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1!==n.get(r+"Bubble")||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},b.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=b.utils.peekObservable(t);return n&&"number"!=typeof n.length?(b.utils.unwrapObservable(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:b.nativeTemplateEngine.instance}):{foreach:t,templateEngine:b.nativeTemplateEngine.instance}}},init:function(e,t,n,i,o){return b.bindingHandlers.template.init(e,b.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,i,o){return b.bindingHandlers.template.update(e,b.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,i,o)}},b.expressionRewriting.bindingRewriteValidators.foreach=!1,b.virtualElements.allowedBindings.foreach=!0;b.bindingHandlers.hasfocus={init:function(e,t,n){var i=function(i){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(e){r=o.body}i=r===e}var s=t();b.expressionRewriting.writeValueToProperty(s,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1},o=i.bind(null,!0),r=i.bind(null,!1);b.utils.registerEventHandler(e,"focus",o),b.utils.registerEventHandler(e,"focusin",o),b.utils.registerEventHandler(e,"blur",r),b.utils.registerEventHandler(e,"focusout",r)},update:function(e,t){var n=!!b.utils.unwrapObservable(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),b.dependencyDetection.ignore(b.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},b.expressionRewriting.twoWayBindings.hasfocus=!0,b.bindingHandlers.hasFocus=b.bindingHandlers.hasfocus,b.expressionRewriting.twoWayBindings.hasFocus=!0,b.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){b.utils.setHtml(e,t())}},m("if"),m("ifnot",!1,!0),m("with",!0,!1,function(e,t){return e.createStaticChildContext(t)});var D={};b.bindingHandlers.options={init:function(e){if("select"!==b.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;e.length>0;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function i(){return b.utils.arrayFilter(e.options,function(e){return e.selected})}function o(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function r(t,i,r){r.length&&(v=!h&&r[0].selected?[b.selectExtensions.readValue(r[0])]:[],y=!0);var a=e.ownerDocument.createElement("option");if(t===D)b.utils.setTextContent(a,n.get("optionsCaption")),b.selectExtensions.writeValue(a,s);else{var u=o(t,n.get("optionsValue"),t);b.selectExtensions.writeValue(a,b.utils.unwrapObservable(u));var l=o(t,n.get("optionsText"),u);b.utils.setTextContent(a,l)}return[a]}function a(t,i){if(y&&h)b.selectExtensions.writeValue(e,b.utils.unwrapObservable(n.get("value")),!0);else if(v.length){var o=b.utils.arrayIndexOf(v,b.selectExtensions.readValue(i[0]))>=0;b.utils.setOptionNodeSelectionState(i[0],o),y&&!o&&b.dependencyDetection.ignore(b.utils.triggerEvent,null,[e,"change"])}}var u,l,c=0==e.length,d=e.multiple,p=!c&&d?e.scrollTop:null,f=b.utils.unwrapObservable(t()),h=n.get("valueAllowUnset")&&n.has("value"),m=n.get("optionsIncludeDestroyed"),g={},v=[];h||(d?v=b.utils.arrayMap(i(),b.selectExtensions.readValue):e.selectedIndex>=0&&v.push(b.selectExtensions.readValue(e.options[e.selectedIndex]))),f&&(void 0===f.length&&(f=[f]),l=b.utils.arrayFilter(f,function(e){return m||e===s||null===e||!b.utils.unwrapObservable(e._destroy)}),n.has("optionsCaption")&&null!==(u=b.utils.unwrapObservable(n.get("optionsCaption")))&&u!==s&&l.unshift(D));var y=!1;g.beforeRemove=function(t){e.removeChild(t)};var w=a;n.has("optionsAfterRender")&&"function"==typeof n.get("optionsAfterRender")&&(w=function(e,t){a(e,t),b.dependencyDetection.ignore(n.get("optionsAfterRender"),null,[t[0],e!==D?e:s])}),b.utils.setDomNodeChildrenFromArrayMapping(e,l,r,g,w),b.dependencyDetection.ignore(function(){if(h)b.selectExtensions.writeValue(e,b.utils.unwrapObservable(n.get("value")),!0);else{var t;t=d?v.length&&i().length<v.length:v.length&&e.selectedIndex>=0?b.selectExtensions.readValue(e.options[e.selectedIndex])!==v[0]:v.length||e.selectedIndex>=0,t&&b.utils.triggerEvent(e,"change")}}),b.utils.ensureSelectElementIsRenderedCorrectly(e),p&&Math.abs(p-e.scrollTop)>20&&(e.scrollTop=p)}},b.bindingHandlers.options.optionValueDomDataKey=b.utils.domData.nextKey(),b.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(e,t,n){b.utils.registerEventHandler(e,"change",function(){var i=t(),o=[];b.utils.arrayForEach(e.getElementsByTagName("option"),function(e){e.selected&&o.push(b.selectExtensions.readValue(e))}),b.expressionRewriting.writeValueToProperty(i,n,"selectedOptions",o)})},update:function(e,t){if("select"!=b.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=b.utils.unwrapObservable(t()),i=e.scrollTop;n&&"number"==typeof n.length&&b.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=b.utils.arrayIndexOf(n,b.selectExtensions.readValue(e))>=0;e.selected!=t&&b.utils.setOptionNodeSelectionState(e,t)}),e.scrollTop=i}},b.expressionRewriting.twoWayBindings.selectedOptions=!0,b.bindingHandlers.style={update:function(e,t){var n=b.utils.unwrapObservable(t()||{});b.utils.objectForEach(n,function(t,n){n=b.utils.unwrapObservable(n),null!==n&&n!==s&&!1!==n||(n=""),e.style[t]=n})}},b.bindingHandlers.submit={init:function(e,t,n,i,o){if("function"!=typeof t())throw new Error("The value for a submit binding must be a function");b.utils.registerEventHandler(e,"submit",function(n){var i,r=t();try{i=r.call(o.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},b.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){b.utils.setTextContent(e,t())}},b.virtualElements.allowedBindings.text=!0,function(){if(a&&a.navigator)var e=function(e){if(e)return parseFloat(e[1])},t=a.opera&&a.opera.version&&parseInt(a.opera.version()),n=a.navigator.userAgent,i=e(n.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),o=e(n.match(/Firefox\/([^ ]*)/));if(b.utils.ieVersion<10)var r=b.utils.domData.nextKey(),u=b.utils.domData.nextKey(),l=function(e){var t=this.activeElement,n=t&&b.utils.domData.get(t,u);n&&n(e)},c=function(e,t){var n=e.ownerDocument;b.utils.domData.get(n,r)||(b.utils.domData.set(n,r,!0),b.utils.registerEventHandler(n,"selectionchange",l)),b.utils.domData.set(e,u,t)};b.bindingHandlers.textInput={init:function(e,n,r){var a,u,l=e.value,d=function(t){clearTimeout(a),u=a=s;var i=e.value;l!==i&&(t&&(e._ko_textInputProcessedEvent=t.type),l=i,b.expressionRewriting.writeValueToProperty(n(),r,"textInput",i))},p=function(t){if(!a){u=e.value;var n=d.bind(e,{type:t.type});a=b.utils.setTimeout(n,4)}},f=9==b.utils.ieVersion?p:d,h=function(){var t=b.utils.unwrapObservable(n());if(null!==t&&t!==s||(t=""),u!==s&&t===u)return void b.utils.setTimeout(h,4);e.value!==t&&(l=t,e.value=t)},m=function(t,n){b.utils.registerEventHandler(e,t,n)};b.bindingHandlers.textInput._forceUpdateOn?b.utils.arrayForEach(b.bindingHandlers.textInput._forceUpdateOn,function(e){"after"==e.slice(0,5)?m(e.slice(5),p):m(e,d)}):b.utils.ieVersion<10?(m("propertychange",function(e){"value"===e.propertyName&&f(e)}),8==b.utils.ieVersion&&(m("keyup",d),m("keydown",d)),b.utils.ieVersion>=8&&(c(e,f),m("dragend",p))):(m("input",d),i<5&&"textarea"===b.utils.tagNameLower(e)?(m("keydown",p),m("paste",p),m("cut",p)):t<11?m("keydown",p):o<4&&(m("DOMAutoComplete",d),m("dragdrop",d),m("drop",d))),m("change",d),b.computed(h,null,{disposeWhenNodeIsRemoved:e})}},b.expressionRewriting.twoWayBindings.textInput=!0,b.bindingHandlers.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),b.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++b.bindingHandlers.uniqueName.currentIndex;b.utils.setElementName(e,n)}}},b.bindingHandlers.uniqueName.currentIndex=0,b.bindingHandlers.value={after:["options","foreach"],init:function(e,t,n){if("input"==e.tagName.toLowerCase()&&("checkbox"==e.type||"radio"==e.type))return void b.applyBindingAccessorsToNode(e,{checkedValue:t});var i=["change"],o=n.get("valueUpdate"),r=!1,s=null;o&&("string"==typeof o&&(o=[o]),b.utils.arrayPushAll(i,o),i=b.utils.arrayGetDistinctValues(i));var a=function(){s=null,r=!1;var i=t(),o=b.selectExtensions.readValue(e);b.expressionRewriting.writeValueToProperty(i,n,"value",o)};b.utils.ieVersion&&"input"==e.tagName.toLowerCase()&&"text"==e.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete)&&-1==b.utils.arrayIndexOf(i,"propertychange")&&(b.utils.registerEventHandler(e,"propertychange",function(){r=!0}),b.utils.registerEventHandler(e,"focus",function(){r=!1}),b.utils.registerEventHandler(e,"blur",function(){r&&a()})),b.utils.arrayForEach(i,function(t){var n=a;b.utils.stringStartsWith(t,"after")&&(n=function(){s=b.selectExtensions.readValue(e),b.utils.setTimeout(a,0)},t=t.substring("after".length)),b.utils.registerEventHandler(e,t,n)});var u=function(){var i=b.utils.unwrapObservable(t()),o=b.selectExtensions.readValue(e);if(null!==s&&i===s)return void b.utils.setTimeout(u,0);if(i!==o)if("select"===b.utils.tagNameLower(e)){var r=n.get("valueAllowUnset"),a=function(){b.selectExtensions.writeValue(e,i,r)};a(),r||i===b.selectExtensions.readValue(e)?b.utils.setTimeout(a,0):b.dependencyDetection.ignore(b.utils.triggerEvent,null,[e,"change"])}else b.selectExtensions.writeValue(e,i)};b.computed(u,null,{disposeWhenNodeIsRemoved:e})},update:function(){}},b.expressionRewriting.twoWayBindings.value=!0,b.bindingHandlers.visible={update:function(e,t){var n=b.utils.unwrapObservable(t()),i=!("none"==e.style.display);n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},function(e){b.bindingHandlers[e]={init:function(t,n,i,o,r){var s=function(){var t={};return t[e]=n(),t};return b.bindingHandlers.event.init.call(this,t,s,i,o,r)}}}("click"),b.templateEngine=function(){},b.templateEngine.prototype.renderTemplateSource=function(e,t,n,i){throw new Error("Override renderTemplateSource")},b.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},b.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||u;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new b.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new b.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},b.templateEngine.prototype.renderTemplate=function(e,t,n,i){var o=this.makeTemplateSource(e,i);return this.renderTemplateSource(o,t,n,i)},b.templateEngine.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},b.templateEngine.prototype.rewriteTemplate=function(e,t,n){var i=this.makeTemplateSource(e,n),o=t(i.text());i.text(o),i.data("isRewritten",!0)},b.exportSymbol("templateEngine",b.templateEngine),b.templateRewriting=function(){function e(e){for(var t=b.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var i=e[n].key;if(t.hasOwnProperty(i)){var o=t[i];if("function"==typeof o){var r=o(e[n].value);if(r)throw new Error(r)}else if(!o)throw new Error("This template engine does not support the '"+i+"' binding within its templates")}}}function t(t,n,i,o){var r=b.expressionRewriting.parseObjectLiteral(t);e(r);var s=b.expressionRewriting.preProcessBindings(r,{valueAccessors:!0}),a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s+" } })()},'"+i.toLowerCase()+"')";return o.createJavaScriptEvaluatorBlock(a)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return b.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,o){return e.replace(n,function(){return t(arguments[4],arguments[1],arguments[2],o)}).replace(i,function(){return t(arguments[1],"\x3c!-- ko --\x3e","#comment",o)})},applyMemoizedBindingsToNextSibling:function(e,t){return b.memoization.memoize(function(n,i){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&b.applyBindingAccessorsToNode(o,e,i)})}}}(),b.exportSymbol("__tr_ambtns",b.templateRewriting.applyMemoizedBindingsToNextSibling),function(){function e(e){return b.utils.domData.get(e,i)||{}}function t(e,t){b.utils.domData.set(e,i,t)}b.templateSources={};b.templateSources.domElement=function(e){if(this.domElement=e,e){var t=b.utils.tagNameLower(e);this.templateType="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},b.templateSources.domElement.prototype.text=function(){var e=1===this.templateType?"text":2===this.templateType?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var t=arguments[0];"innerHTML"===e?b.utils.setHtml(this.domElement,t):this.domElement[e]=t};var n=b.utils.domData.nextKey()+"_";b.templateSources.domElement.prototype.data=function(e){if(1===arguments.length)return b.utils.domData.get(this.domElement,n+e);b.utils.domData.set(this.domElement,n+e,arguments[1])};var i=b.utils.domData.nextKey();b.templateSources.domElement.prototype.nodes=function(){var n=this.domElement;if(0==arguments.length){return e(n).containerData||(3===this.templateType?n.content:4===this.templateType?n:s)}t(n,{containerData:arguments[0]})},b.templateSources.anonymousTemplate=function(e){this.domElement=e},b.templateSources.anonymousTemplate.prototype=new b.templateSources.domElement,b.templateSources.anonymousTemplate.prototype.constructor=b.templateSources.anonymousTemplate,b.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var n=e(this.domElement);return n.textData===s&&n.containerData&&(n.textData=n.containerData.innerHTML),n.textData}var i=arguments[0];t(this.domElement,{textData:i})},b.exportSymbol("templateSources",b.templateSources),b.exportSymbol("templateSources.domElement",b.templateSources.domElement),b.exportSymbol("templateSources.anonymousTemplate",b.templateSources.anonymousTemplate)}(),function(){function e(e,t,n){for(var i,o=e,r=b.virtualElements.nextSibling(t);o&&(i=o)!==r;)o=b.virtualElements.nextSibling(i),n(i,o)}function t(t,n){if(t.length){var i=t[0],o=t[t.length-1],r=i.parentNode,s=b.bindingProvider.instance,a=s.preprocessNode;if(a){if(e(i,o,function(e,t){var n=e.previousSibling,r=a.call(s,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))}),t.length=0,!i)return;i===o?t.push(i):(t.push(i,o),b.utils.fixUpContinuousNodeArray(t,r))}e(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||b.applyBindings(n,e)}),e(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||b.memoization.unmemoizeDomNodeAndDescendants(e,[n])}),b.utils.fixUpContinuousNodeArray(t,r)}}function n(e){return e.nodeType?e:e.length>0?e[0]:null}function i(e,i,o,r,s){s=s||{};var u=e&&n(e),l=(u||o||{}).ownerDocument,c=s.templateEngine||a;b.templateRewriting.ensureTemplateIsRewritten(o,c,l);var d=c.renderTemplate(o,r,s,l);if("number"!=typeof d.length||d.length>0&&"number"!=typeof d[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(i){case"replaceChildren":b.virtualElements.setDomNodeChildren(e,d),p=!0;break;case"replaceNode":b.utils.replaceDomNodes(e,d),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+i)}return p&&(t(d,r),s.afterRender&&b.dependencyDetection.ignore(s.afterRender,null,[d,r.$data])),d}function o(e,t,n){return b.isObservable(e)?e():"function"==typeof e?e(t,n):e}function r(e,t){var n=b.utils.domData.get(e,u);n&&"function"==typeof n.dispose&&n.dispose(),b.utils.domData.set(e,u,t&&t.isActive()?t:s)}var a;b.setTemplateEngine=function(e){if(e!=s&&!(e instanceof b.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");a=e},b.renderTemplate=function(e,t,r,u,l){if(r=r||{},(r.templateEngine||a)==s)throw new Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",u){var c=n(u),d=function(){return!c||!b.utils.domNodeIsAttachedToDocument(c)},p=c&&"replaceNode"==l?c.parentNode:c;return b.dependentObservable(function(){var s=t&&t instanceof b.bindingContext?t:new b.bindingContext(t,null,null,null,{exportDependencies:!0}),a=o(e,s.$data,s),d=i(u,l,a,s,r);"replaceNode"==l&&(u=d,c=n(u))},null,{disposeWhen:d,disposeWhenNodeIsRemoved:p})}return b.memoization.memoize(function(n){b.renderTemplate(e,t,r,n,"replaceNode")})},b.renderTemplateForEach=function(e,n,r,a,u){var l,c=function(t,n){return l=u.createChildContext(t,r.as,function(e){e.$index=n}),i(null,"ignoreTargetNode",o(e,t,l),l,r)},d=function(e,n,i){t(n,l),r.afterRender&&r.afterRender(n,e),l=null};return b.dependentObservable(function(){var e=b.utils.unwrapObservable(n)||[];void 0===e.length&&(e=[e]);var t=b.utils.arrayFilter(e,function(e){return r.includeDestroyed||e===s||null===e||!b.utils.unwrapObservable(e._destroy)});b.dependencyDetection.ignore(b.utils.setDomNodeChildrenFromArrayMapping,null,[a,t,c,r,d])},null,{disposeWhenNodeIsRemoved:a})};var u=b.utils.domData.nextKey();b.bindingHandlers.template={init:function(e,t){var n=b.utils.unwrapObservable(t());if("string"==typeof n||n.name)b.virtualElements.emptyNode(e);else if("nodes"in n){var i=n.nodes||[];if(b.isObservable(i))throw new Error('The "nodes" option must be a plain, non-observable array.');var o=b.utils.moveCleanedNodesToContainerElement(i);new b.templateSources.anonymousTemplate(e).nodes(o)}else{var r=b.virtualElements.childNodes(e),o=b.utils.moveCleanedNodesToContainerElement(r);new b.templateSources.anonymousTemplate(e).nodes(o)}return{controlsDescendantBindings:!0}},update:function(e,t,n,i,o){var s,a=t(),u=b.utils.unwrapObservable(a),l=!0,c=null;if("string"==typeof u?(s=a,u={}):(s=u.name,"if"in u&&(l=b.utils.unwrapObservable(u.if)),l&&"ifnot"in u&&(l=!b.utils.unwrapObservable(u.ifnot))),"foreach"in u){var d=l&&u.foreach||[];c=b.renderTemplateForEach(s||e,d,u,e,o)}else if(l){var p="data"in u?o.createStaticChildContext(u.data,u.as):o;c=b.renderTemplate(s||e,p,u,e)}else b.virtualElements.emptyNode(e);r(e,c)}},b.expressionRewriting.bindingRewriteValidators.template=function(e){var t=b.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:b.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},b.virtualElements.allowedBindings.template=!0}(),b.exportSymbol("setTemplateEngine",b.setTemplateEngine),b.exportSymbol("renderTemplate",b.renderTemplate),b.utils.findMovesInArrayComparison=function(e,t,n){if(e.length&&t.length){var i,o,r,s,a;for(i=o=0;(!n||i<n)&&(s=e[o]);++o){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),i=r=0;break}i+=r}}},b.utils.compareArrays=function(){function e(e,o,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},e=e||[],o=o||[],e.length<o.length?t(e,o,n,i,r):t(o,e,i,n,r)}function t(e,t,n,i,o){var r,s,a,u,l,c,d=Math.min,p=Math.max,f=[],h=e.length,m=t.length,g=m-h||1,v=h+m+1;for(r=0;r<=h;r++)for(u=a,f.push(a=[]),l=d(m,r+g),c=p(0,r-1),s=c;s<=l;s++)if(s)if(r)if(e[r-1]===t[s-1])a[s]=u[s-1];else{var y=u[s]||v,w=a[s-1]||v;a[s]=d(y,w)+1}else a[s]=s+1;else a[s]=r+1;var k,E=[],x=[],T=[];for(r=h,s=m;r||s;)k=f[r][s]-1,s&&k===f[r][s-1]?x.push(E[E.length]={status:n,value:t[--s],index:s}):r&&k===f[r-1][s]?T.push(E[E.length]={status:i,value:e[--r],index:r}):(--s,--r,o.sparse||E.push({status:"retained",value:t[s]}));return b.utils.findMovesInArrayComparison(T,x,!o.dontLimitMoves&&10*h),E.reverse()}var n="added",i="deleted";return e}(),b.exportSymbol("utils.compareArrays",b.utils.compareArrays),function(){function e(e,t,n,i,o){var r=[],a=b.dependentObservable(function(){var s=t(n,o,b.utils.fixUpContinuousNodeArray(r,e))||[];r.length>0&&(b.utils.replaceDomNodes(r,s),i&&b.dependencyDetection.ignore(i,null,[n,s,o])),r.length=0,b.utils.arrayPushAll(r,s)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!b.utils.anyDomNodeIsAttachedToDocument(r)}});return{mappedNodes:r,dependentObservable:a.isActive()?a:s}}var t=b.utils.domData.nextKey(),n=b.utils.domData.nextKey();b.utils.setDomNodeChildrenFromArrayMapping=function(i,o,r,a,u){function l(e,t){d=m[t],k!==t&&(C[e]=d),d.indexObservable(k++),b.utils.fixUpContinuousNodeArray(d.mappedNodes,i),y.push(d),x.push(d)}function c(e,t){if(e)for(var n=0,i=t.length;n<i;n++)t[n]&&b.utils.arrayForEach(t[n].mappedNodes,function(i){e(i,n,t[n].arrayEntry)})}o=o||[],a=a||{};for(var d,p,f,h=b.utils.domData.get(i,t)===s,m=b.utils.domData.get(i,t)||[],g=b.utils.arrayMap(m,function(e){return e.arrayEntry}),v=b.utils.compareArrays(g,o,a.dontLimitMoves),y=[],w=0,k=0,E=[],x=[],T=[],C=[],S=[],N=0;p=v[N];N++)switch(f=p.moved,p.status){case"deleted":f===s&&(d=m[w],d.dependentObservable&&(d.dependentObservable.dispose(),d.dependentObservable=s),b.utils.fixUpContinuousNodeArray(d.mappedNodes,i).length&&(a.beforeRemove&&(y.push(d),x.push(d),d.arrayEntry===n?d=null:T[N]=d),d&&E.push.apply(E,d.mappedNodes))),w++;break;case"retained":l(N,w++);break;case"added":f!==s?l(N,f):(d={arrayEntry:p.value,indexObservable:b.observable(k++)},y.push(d),x.push(d),h||(S[N]=d))}b.utils.domData.set(i,t,y),c(a.beforeMove,C),b.utils.arrayForEach(E,a.beforeRemove?b.cleanNode:b.removeNode);for(var _,O,N=0,D=b.virtualElements.firstChild(i);d=x[N];N++){d.mappedNodes||b.utils.extend(d,e(i,r,d.arrayEntry,u,d.indexObservable));for(var A=0;O=d.mappedNodes[A];D=O.nextSibling,_=O,A++)O!==D&&b.virtualElements.insertAfter(i,O,_);!d.initialized&&u&&(u(d.arrayEntry,d.mappedNodes,d.indexObservable),d.initialized=!0)}for(c(a.beforeRemove,T),N=0;N<T.length;++N)T[N]&&(T[N].arrayEntry=n);c(a.afterMove,C),c(a.afterAdd,S)}}(),b.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",b.utils.setDomNodeChildrenFromArrayMapping),b.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},b.nativeTemplateEngine.prototype=new b.templateEngine,b.nativeTemplateEngine.prototype.constructor=b.nativeTemplateEngine,b.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n,i){var o=!(b.utils.ieVersion<9),r=o?e.nodes:null,s=r?e.nodes():null;if(s)return b.utils.makeArray(s.cloneNode(!0).childNodes);var a=e.text();return b.utils.parseHtmlFragment(a,i)},b.nativeTemplateEngine.instance=new b.nativeTemplateEngine,b.setTemplateEngine(b.nativeTemplateEngine.instance),b.exportSymbol("nativeTemplateEngine",b.nativeTemplateEngine),function(){b.jqueryTmplTemplateEngine=function(){function e(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function t(e,t,n){return c.tmpl(e,t,n)}var n=this.jQueryTmplVersion=function(){if(!c||!c.tmpl)return 0;try{if(c.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,i,o,r){r=r||u,o=o||{},e();var s=n.data("precompiled");if(!s){var a=n.text()||"";a="{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}",s=c.template(null,a),n.data("precompiled",s)}var l=[i.$data],d=c.extend({koBindingContext:i},o.templateOptions),p=t(s,l,d);return p.appendTo(r.createElement("div")),c.fragments={},p},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){u.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},n>0&&(c.tmpl.tag.ko_code={open:"__.push($1 || '');"},c.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},b.jqueryTmplTemplateEngine.prototype=new b.templateEngine,b.jqueryTmplTemplateEngine.prototype.constructor=b.jqueryTmplTemplateEngine;var e=new b.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&b.setTemplateEngine(e),b.exportSymbol("jqueryTmplTemplateEngine",b.jqueryTmplTemplateEngine)}()})}()}()},function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.create(e.prototype);for(var o in n)i[o]=n[o];return i.constructor=t,t.prototype=i,t}t.__esModule=!0,t.inherits=i},function(e,t,n){"use strict";function i(e){var t=e?{v:e}:{};return(0,r.inherits)(s,(0,o.createTokenClass)(),t)}t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var o=n(8),r=n(1),s=(0,o.createTokenClass)();s.prototype={toString:function(){return this.v+""}};var a=i(),u=i("@"),l=i(":"),c=i("."),d=i(),p=i(),f=i("\n"),h=i(),m=i("+"),b=i("#"),g=i(),v=i("mailto:"),y=i("?"),w=i("/"),k=i("_"),E=i(),x=i(),T=i(),C=i("{"),S=i("["),N=i("<"),_=i("("),O=i("}"),D=i("]"),A=i(">"),R=i(")"),I=i("&");t.Base=s,t.DOMAIN=a,t.AT=u,t.COLON=l,t.DOT=c,t.PUNCTUATION=d,t.LOCALHOST=p,t.NL=f,t.NUM=h,t.PLUS=m,t.POUND=b,t.QUERY=y,t.PROTOCOL=g,t.MAILTO=v,t.SLASH=w,t.UNDERSCORE=k,t.SYM=E,t.TLD=x,t.WS=T,t.OPENBRACE=C,t.OPENBRACKET=S,t.OPENANGLEBRACKET=N,t.OPENPAREN=_,t.CLOSEBRACE=O,t.CLOSEBRACKET=D,t.CLOSEANGLEBRACKET=A,t.CLOSEPAREN=R,t.AMPERSAND=I},function(e,t,n){"use strict";t.__esModule=!0;var i={nbsp:""};t.default=i},function(e,t,n){"use strict";function i(e){this.named=e}t.__esModule=!0;var o=/^#[xX]([A-Fa-f0-9]+)$/,r=/^#([0-9]+)$/,s=/^([A-Za-z0-9]+)$/;i.prototype.parse=function(e){if(e){var t=e.match(o);return t?"&#x"+t[1]+";":(t=e.match(r))?"&#"+t[1]+";":(t=e.match(s),t?this.named[t[1]]||"&"+t[1]+";":void 0)}},t.default=i},function(e,t,n){"use strict";function i(e,t){this.delegate=e,this.entityParser=t,this.state=null,this.input=null,this.index=-1,this.line=-1,this.column=-1,this.tagLine=-1,this.tagColumn=-1,this.reset()}t.__esModule=!0;var o=n(20);i.prototype={reset:function(){this.state="beforeData",this.input="",this.index=0,this.line=1,this.column=0,this.tagLine=-1,this.tagColumn=-1,this.delegate.reset()},tokenize:function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},tokenizePart:function(e){for(this.input+=(0,o.preprocessInput)(e);this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var e=this.peek();return this.index++,"\n"===e?(this.line++,this.column=0):this.column++,e},consumeCharRef:function(){var e=this.input.indexOf(";",this.index);if(-1!==e){var t=this.input.slice(this.index,e),n=this.entityParser.parse(t);if(n){for(var i=t.length;i;)this.consume(),i--;return this.consume(),n}}},markTagStart:function(){this.tagLine=this.line,this.tagColumn=this.column,this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var e=this.peek();"<"===e?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===e?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();"!"===e?this.state="markupDeclaration":"/"===e?this.state="endTagOpen":(0,o.isAlpha)(e)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(e.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var e=this.consume();"-"===e?this.state="commentStartDash":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData(e),this.state="comment")},commentStartDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var e=this.consume();"-"===e?this.state="commentEndDash":this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":(this.delegate.appendToCommentData("-"+e),this.state="comment")},commentEnd:function(){var e=this.consume();">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+e),this.state="comment")},tagName:function(){var e=this.consume();(0,o.isSpace)(e)?this.state="beforeAttributeName":"/"===e?this.state="selfClosingStartTag":">"===e?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();if((0,o.isSpace)(e))return void this.consume();"/"===e?(this.state="selfClosingStartTag",this.consume()):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},attributeName:function(){var e=this.peek();(0,o.isSpace)(e)?(this.state="afterAttributeName",this.consume()):"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.state="beforeAttributeValue",this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();if((0,o.isSpace)(e))return void this.consume();"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.consume(),this.state="beforeAttributeValue"):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();(0,o.isSpace)(e)?this.consume():'"'===e?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===e?(this.state="attributeValueSingleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();'"'===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();"'"===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();(0,o.isSpace)(e)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===e?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||"&")):">"===e?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();(0,o.isSpace)(e)?(this.consume(),this.state="beforeAttributeName"):"/"===e?(this.consume(),this.state="selfClosingStartTag"):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var e=this.consume();(0,o.isAlpha)(e)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(e.toLowerCase()))}}},t.default=i},function(e,t,n){"use strict";function i(e,t){this.token=null,this.startLine=1,this.startColumn=0,this.options=t||{},this.tokenizer=new r.default(this,e)}t.__esModule=!0;var o=n(5),r=function(e){return e&&e.__esModule?e:{default:e}}(o);i.prototype={tokenize:function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},tokenizePart:function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},tokenizeEOF:function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},reset:function(){this.token=null,this.startLine=1,this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""},this.tokens.push(this.token)},appendToData:function(e){this.token.chars+=e},finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""},this.tokens.push(this.token)},appendToCommentData:function(e){this.token.chars+=e},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1},this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""},this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=!0},appendToTagName:function(e){this.token.tagName+=e},beginAttribute:function(){this._currentAttribute=["","",null],this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(e){this._currentAttribute[0]+=e},beginAttributeValue:function(e){this._currentAttribute[2]=e},appendToAttributeValue:function(e){this._currentAttribute[1]=this._currentAttribute[1]||"",this._currentAttribute[1]+=e},finishAttributeValue:function(){}},t.default=i},function(e,t,n){"use strict";function i(){return function(e){this.j=[],this.T=e||null}}function o(e,t,n,i){for(var o=0,r=e.length,s=t,u=[],l=void 0;o<r&&(l=s.next(e[o]));)s=l,o++;if(o>=r)return[];for(;o<r-1;)l=new a(i),u.push(l),s.on(e[o],l),s=l,o++;return l=new a(n),u.push(l),s.on(e[r-1],l),u}t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var r=n(1),s=i();s.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)this.j.push([e[n],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var n=this.j[t],i=n[0],o=n[1];if(this.test(e,i))return o}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var a=(0,r.inherits)(s,i(),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),u=(0,r.inherits)(s,i(),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.next(new e(""));return n===this.defaultTransition?(n=new this.constructor(t),this.on(e,n)):t&&(n.T=t),n},test:function(e,t){return e instanceof t}});t.CharacterState=a,t.TokenState=u,t.stateify=o},function(e,t,n){"use strict";function i(){return function(e){e&&(this.v=e)}}t.__esModule=!0,t.createTokenClass=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(0),r=i(o),s=n(10),a=i(s),u=n(11),l=i(u),c=n(12),d=i(c),p=n(32),f=i(p),h=window,m=h.CodeMirror,b=h.SERVER_URI;a.default.register(m),l.default.register();var g=document.createElement("script");g.src=b+'/socket.io/socket.io.js"><\/script>',g.addEventListener("load",function(){var e=window,t=e.alert,n=e.io;if(void 0===n)t("Unable to connect to "+b);else{var i={win:window,doc:document,io:n,CodeMirror:m,SERVER_URI:b},o=new d.default(i);o.newClientTab(),r.default.applyBindings(o),(0,f.default)(window,function(){return o.anyTabLoggedIn()})}}),document.head.appendChild(g)},function(e,t,n){"use strict";function i(e){function t(t,n,i){var o=i.get("codemirrorOptions")||{};o.value=r.default.unwrap(n());var s=e(t,o);s.on("change",function(e){n()(e.getValue())}),t.editor=s}function n(e,t){var n=r.default.unwrap(t());if(e.editor){n!==e.editor.getValue()&&(e.editor.setValue(n),e.editor.refresh())}}r.default.bindingHandlers.codemirror={init:t,update:n}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={register:i}},function(e,t,n){"use strict";function i(){function e(e){e.classList.remove("cloak")}r.default.bindingHandlers.uncloak={init:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={register:i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=i(s),u=n(13),l=i(u),c=n(27),d=i(c),p=n(29),f=i(p),h=n(31),m=i(h),b=function(){function e(t){o(this,e),this.deps=t,this.activeTab=a.default.observable(),this.tabs=a.default.observableArray([]),this.searchViewModel=a.default.observable(),this.activeViewModel=a.default.computed(this.computeActiveViewModel.bind(this)),this.hidden=a.default.computed(this.computeHidden.bind(this)),this.visible=a.default.computed(this.computeVisible.bind(this)),this.tabPaneClasses=a.default.computed(this.computeTabPaneClasses.bind(this)),this.templateBinding=a.default.computed(this.computeTemplateBinding.bind(this)),this.activeSocket=a.default.computed(this.computeActiveSocket.bind(this)),this.anyTabLoggedIn=a.default.computed(this.computedAnyTabLoggedIn.bind(this)),this.activeTab(this.tabs()[0])}return r(e,[{key:"computeActiveViewModel",value:function(){var e=this.searchViewModel();if(e)return e;var t=this.activeTab();return t?t.viewModel:this}},{key:"computeHidden",value:function(){var e=this.tabs().length,t=this.tabs()[0];return 0===e||1===e&&t.hideIfOnlyMe()}},{key:"computeVisible",value:function(){return!this.hidden()}},{key:"computeTabPaneClasses",value:function(){var e=this.activeTab(),t=void 0;return t=e?e.tabPaneClasses():[],this.visible()&&t.push("tabs-visible"),t.join(" ")}},{key:"computeTemplateBinding",value:function(){var e=this.activeTab();return e?e.templateBinding():{name:"no-tabs",data:this}}},{key:"computeActiveSocket",value:function(){return this.activeViewModel().socket}},{key:"computedAnyTabLoggedIn",value:function(){return this.tabs().reduce(function(e,t){return e||t.viewModel&&t.viewModel.loggedIn&&t.viewModel.loggedIn()},!1)}},{key:"tabPaneClasses",value:function(){return[]}},{key:"newClientTab",value:function(){this.addAndSelectTab(new l.default(this.deps,this))}},{key:"newEditVerbTab",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.newEditTab.apply(this,[d.default].concat(t))}},{key:"newEditFunctionTab",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.newEditTab.apply(this,[f.default].concat(t))}},{key:"newEditTab",value:function(e,t,n){var i=e.tabName(n);this.selectExistingTab(i)||this.addAndSelectTab(new e(this.deps,this,t,n))}},{key:"addAndSelectTab",value:function(e){this.tabs.push(e),e.select()}},{key:"selectExistingTab",value:function(e){var t=!1;return this.tabs().forEach(function(n){n.name()===e&&(n.select(),t=!0)}),t}},{key:"closeTab",value:function(e){var t=this.tabs().length-1,n=this.tabs.indexOf(e);n===t&&(n-=1),this.tabs.remove(e),t>0?this.tabs()[n].select():this.activeTab(null)}},{key:"closeSameTabs",value:function(e){var t=this;this.tabs().forEach(function(n){n.name()!==e.name()||n.dirty()||t.closeTab(n)})}},{key:"onKeyDown",value:function(){var e=arguments.length<=1?void 0:arguments[1],t=this.activeViewModel(),n=void 0===e.which?e.keyCode:e.which,i=e.metaKey,o=e.ctrlKey,r=80===n;return i&&r||o&&r?(this.searchViewModel()||this.searchViewModel(new m.default(this.deps,this,this.activeSocket())),!1):t===this||!t.onKeyDown||t.onKeyDown.apply(t,arguments)}},{key:"onKeyUp",value:function(){var e=this.activeViewModel();return e===this||!e.onKeyUp||e.onKeyUp.apply(e,arguments)}}]),e}();t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=i(s),u=n(14),l=i(u),c=function(){function e(t,n){o(this,e),this.parentViewModel=n,this.templateId="client",this.viewModel=new l.default(t,this),this.dirty=!1,this.name=a.default.observable("Room.js"),this.active=a.default.computed(this.computeActive.bind(this))}return r(e,[{key:"templateBinding",value:function(){return{name:this.templateId,data:this.viewModel}}},{key:"computeActive",value:function(){return this.parentViewModel.activeTab()===this}},{key:"select",value:function(){this.parentViewModel.activeTab(this),this.viewModel.scrollToBottom(),this.viewModel.inputHasFocus(!0)}},{key:"close",value:function(){this.viewModel.willClose()&&this.parentViewModel.closeTab(this)}},{key:"tabPaneClasses",value:function(){return["tab-pane-client"]}},{key:"hideIfOnlyMe",value:function(){return!0}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return Array.isArray(e)?e:Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),u=i(a),l=n(15),c=i(l),d=n(16),p=n(17),f=i(p),h=u.default.observable,m=u.default.observableArray,b=u.default.computed,g=function(){function e(t,n){var i=this;r(this,e);var o=t.SERVER_URI,s=t.doc,a=t.win,u=t.io;this.window=a,this.ansiUp=new c.default,this.ansiUp.use_classes=!0,this.$scrollingElement=s.scrollingElement,void 0===this.$scrollingElement&&(this.$scrollingElement=s.querySelector("html")),this.parentViewModel=n,this.socket=u.connect(o),this.history=[],this.inputCallback=null,this.lines=m([]),this.command=h(""),this.inputType=h("text"),this.promptStr=h(""),this.rightPromptStr=h(""),this.inputHasFocus=h(!0),this.loggedIn=h(!1),this.playing=h(!1),this.maxLines=h(this.readConfig("maxLines")||1e3),this.maxHistory=h(this.readConfig("maxHistory")||1e3),this.echo=h(this.readConfig("echo")||!1),this.space=h(this.readConfig("space")||!1),this.promptFormatted=b(function(){return i.colorize(i.composedPrompt())}),this.rightPromptFormatted=b(function(){return i.colorize(i.rightPromptStr())}),this.maxLines.subscribe(function(e){i.lines().length>e&&i.truncateLines()}),this.maxHistory.subscribe(function(e){i.history().length>e&&i.truncateHistory()}),this.echo.subscribe(function(e){i.writeConfig("echo",e)}),this.space.subscribe(function(e){i.writeConfig("space",e)}),this.socket.on("connect",this.onConnect.bind(this)),this.socket.on("connecting",this.onConnecting.bind(this)),this.socket.on("disconnect",this.onDisconnect.bind(this)),this.socket.on("connect_failed",this.onConnectFailed.bind(this)),this.socket.on("error",this.onError.bind(this)),this.socket.on("reconnect_failed",this.onReconnectFailed.bind(this)),this.socket.on("reconnect",this.onReconnect.bind(this)),this.socket.on("reconnecting",this.onReconnecting.bind(this)),this.socket.on("output",this.onOutput.bind(this)),this.socket.on("set-prompt",this.onSetPrompt.bind(this)),this.socket.on("set-right-prompt",this.onSetRightPrompt.bind(this)),this.socket.on("request-input",this.onRequestInput.bind(this)),this.socket.on("edit-verb",this.onEditVerb.bind(this)),this.socket.on("edit-function",this.onEditFunction.bind(this)),this.socket.on("login",this.onLogin.bind(this)),this.socket.on("logout",this.onLogout.bind(this)),this.socket.on("playing",this.onPlaying.bind(this)),this.socket.on("quit",this.onQuit.bind(this)),this.addLine((0,d.gray)("Connecting..."))}return s(e,[{key:"composedPrompt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(this.promptStr()+" > "+e).trim()}},{key:"setPrompt",value:function(e,t){this.promptStr(e),t&&this.inputType(t)}},{key:"setRightPrompt",value:function(e){this.rightPromptStr(e)}},{key:"sendCommand",value:function(){var e=this.command().trim();e&&(this.echoCommand(e),this.addToHistory(e),this.handleClientCommand(e)||(this.socket.connected?this.inputCallback?this.handleInputCallback(e):this.socket.emit("input",e):this.addLine((0,d.boldRed)("Not connected."))),this.command(""))}},{key:"echoCommand",value:function(e){this.echo()&&"password"!==this.inputType()&&(this.addLine(this.composedPrompt(e)),this.space()&&this.addLine(" "))}},{key:"addToHistory",value:function(e){"password"!==this.inputType()&&(this.history.unshift(e),this.history.length>this.maxHistory()&&this.truncateHistory(),this.currentHistory=-1)}},{key:"handleClientCommand",value:function(e){switch(e){case".clear":return this.lines([]),!0;case".connect":return this.reconnectSocket(),!0;case".disconnect":return this.disconnectSocket(),!0;case".echo on":return this.echo(!0),!0;case".echo off":return this.echo(!1),!0;case".space on":return this.space(!0),!0;case".space off":return this.space(!1),!0;case".new tab":return this.parentViewModel.parentViewModel.newClientTab(),!0;case".close tab":return this.parentViewModel.close(),!0;default:return!1}}},{key:"handleInputCallback",value:function(e){var t=this.inputCallback;this.inputCallback=null,t(e)}},{key:"addLine",value:function(e){this.lines.push(this.colorize(e)),this.scrollToBottom()}},{key:"disconnectSocket",value:function(){this.socket.connected?this.socket.disconnect():this.addLine((0,d.boldRed)("Not connected."))}},{key:"reconnectSocket",value:function(){this.socket.connected?this.addLine((0,d.boldRed)("Already connected.")):this.socket.connect()}},{key:"scrollToBottom",value:function(){this.$scrollingElement.scrollTop=this.$scrollingElement.scrollHeight-this.window.innerHeight}},{key:"truncateHistory",value:function(){this.history=this.history.slice(0,this.maxHistory())}},{key:"truncateLines",value:function(){var e=this.lines().length-this.maxLines();this.lines(this.lines.slice(e))}},{key:"willClose",value:function(){return this.socket.disconnect(),!0}},{key:"onKeyDown",value:function(e,t){var n=void 0===t.which?t.keyCode:t.which,i=t.metaKey,o=t.ctrlKey,r=t.shiftKey,s=86===n,a=38===n,u=40===n,l=9===n;if(i&&!s||o&&!s)return!0;if(!this.inputHasFocus()&&(this.inputHasFocus(!0),a||u))return this.onRecall(null,{which:n});if(l){var c=r?-1:1;return this.socket.emit("tab-key-press",{direction:c}),!1}return!0}},{key:"onClick",value:function(e,t){if(t.target&&t.target.hash){var n=/#cmd\[(.*?)]/g,i=n.exec(t.target.hash);if(!i)return!0;var o=decodeURIComponent(i[1]);return this.command(o),this.sendCommand(),!1}return!0}},{key:"onRecall",value:function(e,t){var n=void 0===t.which?t.keyCode:t.which;if(0===this.history.length)return!0;switch(n){case 38:return this.currentHistory<this.history.length-1&&(this.currentHistory+=1),this.command(this.history[this.currentHistory]),!1;case 40:this.currentHistory>-1&&(this.currentHistory-=1),this.currentHistory>=0?this.command(this.history[this.currentHistory]):this.command("")}return!0}},{key:"onConnect",value:function(){this.addLine((0,d.boldGreen)("Connected!"))}},{key:"onConnecting",value:function(){this.addLine((0,d.gray)("Connecting..."))}},{key:"onDisconnect",value:function(){this.addLine((0,d.boldRed)("Disconnected from server.")),this.setPrompt(""),this.inputCallback=null,this.loggedIn(!1),this.playing(!1)}},{key:"onConnectFailed",value:function(){this.addLine((0,d.boldRed)("Connection to server failed."))}},{key:"onError",value:function(){this.addLine((0,d.boldRed)("An unknown error occurred."))}},{key:"onReconnectFailed",value:function(){this.addLine((0,d.boldRed)("Unable to reconnect to server."))}},{key:"onReconnect",value:function(){}},{key:"onReconnecting",value:function(){}},{key:"onOutput",value:function(e){e&&e.toString&&(this.addLine(e.toString()),this.space()&&this.addLine(" "))}},{key:"onSetPrompt",value:function(e){this.setPrompt(e)}},{key:"onSetRightPrompt",value:function(e){this.setRightPrompt(e)}},{key:"onEditVerb",value:function(e){this.parentViewModel.parentViewModel.newEditVerbTab(this.socket,e)}},{key:"onEditFunction",value:function(e){this.parentViewModel.parentViewModel.newEditFunctionTab(this.socket,e)}},{key:"onLogin",value:function(){this.loggedIn(!0)}},{key:"onLogout",value:function(){this.loggedIn(!1)}},{key:"onPlaying",value:function(){this.playing(!0)}},{key:"onQuit",value:function(){this.playing(!1)}},{key:"onRequestInput",value:function(e,t){var n=this,i=this.promptStr();this.getInputFromUser({},e,function(e){n.setPrompt(i,"text"),t(e)})}},{key:"getInputFromUser",value:function(e,t,n){var i=this;if(0===t.length)return void n(e);var r=o(t),s=r[0],a=r.slice(1);this.setPrompt(s.label||"input",s.type||"text"),this.inputCallback=function(t){e[s.name||"input"]=t,i.getInputFromUser(e,a,n)}}},{key:"readConfig",value:function(e){return this.window.localStorage?JSON.parse(this.window.localStorage.getItem(e)):null}},{key:"writeConfig",value:function(e,t){this.window.localStorage&&this.window.localStorage.setItem(e,JSON.stringify(t))}},{key:"linkifyCommands",value:function(e){var t=/#cmd\[(.*?)]/g;return e.replace(t,function(e,t){return"<a href='"+e+"'>"+t+"</a>"})}},{key:"colorize",value:function(e){return this.linkifyCommands((0,f.default)(this.ansiUp.ansi_to_html(e)))}}]),e}();t.default=g},function(e,t,n){var i,o,r;!function(n,s){o=[t],i=s,void 0!==(r="function"==typeof i?i.apply(t,o):i)&&(e.exports=r)}(0,function(e){"use strict";function t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e.raw[0],o=/^\s+|\s+\n|\s+#[\s\S]+?\n/gm,r=i.replace(o,"");return new RegExp(r,"m")}var n=function(){function e(){this.VERSION="2.0.1",this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.htmlFormatter={transform:function(e,t){var n=e.text;if(0===n.length)return n;if(t._escape_for_html&&(n=t.old_escape_for_html(n)),!e.bright&&null===e.fg&&null===e.bg)return n;var i=[],o=[],r=e.fg,s=e.bg;null===r&&e.bright&&(r=t.ansi_colors[1][7]),t._use_classes?(r&&("truecolor"!==r.class_name?o.push(r.class_name+"-fg"):i.push("color:rgb("+r.rgb.join(",")+")")),s&&("truecolor"!==s.class_name?o.push(s.class_name+"-bg"):i.push("background-color:rgb("+s.rgb.join(",")+")"))):(r&&i.push("color:rgb("+r.rgb.join(",")+")"),s&&i.push("background-color:rgb("+s.rgb+")"));var a="",u="";return o.length&&(a=' class="'+o.join(" ")+'"'),i.length&&(u=' style="'+i.join(";")+'"'),"<span"+a+u+">"+n+"</span>"},compose:function(e,t){return e.join("")}},this.textFormatter={transform:function(e,t){return e.text},compose:function(e,t){return e.join("")}},this.setup_256_palette(),this._use_classes=!1,this._escape_for_html=!0,this.bright=!1,this.fg=this.bg=null,this._buffer=""}return Object.defineProperty(e.prototype,"use_classes",{get:function(){return this._use_classes},set:function(e){this._use_classes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"escape_for_html",{get:function(){return this._escape_for_html},set:function(e){this._escape_for_html=e},enumerable:!0,configurable:!0}),e.prototype.setup_256_palette=function(){var e=this;this.palette_256=[],this.ansi_colors.forEach(function(t){t.forEach(function(t){e.palette_256.push(t)})});for(var t=[0,95,135,175,215,255],n=0;n<6;++n)for(var i=0;i<6;++i)for(var o=0;o<6;++o){var r={rgb:[t[n],t[i],t[o]],class_name:"truecolor"};this.palette_256.push(r)}for(var s=8,a=0;a<24;++a,s+=10){var u={rgb:[s,s,s],class_name:"truecolor"};this.palette_256.push(u)}},e.prototype.old_escape_for_html=function(e){return e.replace(/[&<>]/gm,function(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":void 0})},e.prototype.old_linkify=function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,function(e){return'<a href="'+e+'">'+e+"</a>"})},e.prototype.detect_incomplete_ansi=function(e){return!/.*?[\x40-\x7e]/.test(e)},e.prototype.detect_incomplete_link=function(e){for(var t=!1,n=e.length-1;n>0;n--)if(/\s|\x1B/.test(e[n])){t=!0;break}if(!t)return/(https?:\/\/[^\s]+)/.test(e)?0:-1;var i=e.substr(n+1,4);return 0===i.length?-1:0==="http".indexOf(i)?n+1:void 0},e.prototype.ansi_to=function(e,t){var n=this._buffer+e;this._buffer="";var i=n.split(/\x1B\[/);1===i.length&&i.push(""),this.handle_incomplete_sequences(i);for(var o=this.with_state(i.shift()),r=new Array(i.length),s=0,a=i.length;s<a;++s)r[s]=t.transform(this.process_ansi(i[s]),this);return o.text.length>0&&r.unshift(t.transform(o,this)),t.compose(r,this)},e.prototype.ansi_to_html=function(e){return this.ansi_to(e,this.htmlFormatter)},e.prototype.ansi_to_text=function(e){return this.ansi_to(e,this.textFormatter)},e.prototype.with_state=function(e){return{bright:this.bright,fg:this.fg,bg:this.bg,text:e}},e.prototype.handle_incomplete_sequences=function(e){var t=e[e.length-1];t.length>0&&this.detect_incomplete_ansi(t)?(this._buffer="["+t,e.pop(),e.push("")):(""===t.slice(-1)&&(this._buffer="",console.log("raw",e),e.pop(),e.push(t.substr(0,t.length-1)),console.log(e),console.log(t)),2===e.length&&""===e[1]&&""===e[0].slice(-1)&&(this._buffer="",t=e.shift(),e.unshift(t.substr(0,t.length-1))))},e.prototype.process_ansi=function(e){this._sgr_regex||(this._sgr_regex=(m=["\n            ^                           # beginning of line\n            ([!<-?]?)             # a private-mode char (!, <, =, >, ?)\n            ([d;]*)                    # any digits or semicolons\n            ([ -/]?               # an intermediate modifier\n            [@-~])                # the command\n            ([sS]*)                   # any text following this CSI sequence\n          "],m.raw=["\n            ^                           # beginning of line\n            ([!\\x3c-\\x3f]?)             # a private-mode char (!, <, =, >, ?)\n            ([\\d;]*)                    # any digits or semicolons\n            ([\\x20-\\x2f]?               # an intermediate modifier\n            [\\x40-\\x7e])                # the command\n            ([\\s\\S]*)                   # any text following this CSI sequence\n          "],t(m)));var n=e.match(this._sgr_regex);if(!n)return this.with_state(e);var i=n[4];if(""!==n[1]||"m"!==n[3])return this.with_state(i);for(var o=n[2].split(";");o.length>0;){var r=o.shift(),s=parseInt(r,10);if(isNaN(s)||0===s)this.fg=this.bg=null,this.bright=!1;else if(1===s)this.bright=!0;else if(22===s)this.bright=!1;else if(39===s)this.fg=null;else if(49===s)this.bg=null;else if(s>=30&&s<38){var a=this.bright?1:0;this.fg=this.ansi_colors[a][s-30]}else if(s>=90&&s<98)this.fg=this.ansi_colors[1][s-90];else if(s>=40&&s<48)this.bg=this.ansi_colors[0][s-40];else if(s>=100&&s<108)this.bg=this.ansi_colors[1][s-100];else if((38===s||48===s)&&o.length>0){var u=38===s,l=o.shift();if("5"===l&&o.length>0){var c=parseInt(o.shift(),10);c>=0&&c<=255&&(u?this.fg=this.palette_256[c]:this.bg=this.palette_256[c])}if("2"===l&&o.length>2){var d=parseInt(o.shift(),10),p=parseInt(o.shift(),10),f=parseInt(o.shift(),10);if(d>=0&&d<=255&&p>=0&&p<=255&&f>=0&&f<=255){var h={rgb:[d,p,f],class_name:"truecolor"};u?this.fg=h:this.bg=h}}}}return this.with_state(i);var m},e}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=n})},function(e,t,n){"use strict";function i(e){return"[1m[31m"+e+"[39m[22m"}function o(e){return"[1m[32m"+e+"[39m[22m"}function r(e){return"[90m"+e+"[39m"}Object.defineProperty(t,"__esModule",{value:!0}),t.boldRed=i,t.boldGreen=o,t.gray=r},function(e,t,n){e.exports=n(18).default},function(e,t,n){"use strict";function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=c.default.tokenize(e),a=[],l=[];for(n=new h(n),t=0;t<i.length;t++){var d=i[t];if(d.type!==m)if(d.type===g){var p=o(d.chars,n);a.push.apply(a,p)}else a.push(d);else{a.push(d);var y=d.tagName.toUpperCase();if(!("A"===y||f.contains(n.ignoreTags,y)))continue;var w=a.length;r(y,i,++t,a),t+=a.length-w-1}}for(t=0;t<a.length;t++){var k=a[t];switch(k.type){case m:var E="<"+k.tagName;if(k.attributes.length>0){E+=" "+u(k.attributes).join(" ")}E+=">",l.push(E);break;case b:l.push("</"+k.tagName+">");break;case g:l.push(s(k.chars));break;case v:l.push("\x3c!--"+s(k.chars)+"--\x3e")}}return l.join("")}function o(e,t){for(var n=p.tokenize(e),i=[],o=0;o<n.length;o++){var r=n[o];if("nl"===r.type&&t.nl2br)i.push({type:m,tagName:"br",attributes:[],selfClosing:!0});else if(r.isLink&&t.check(r)){var s=t.resolve(r),a=(s.href,s.formatted),u=s.formattedHref,l=s.tagName,c=s.className,d=s.target,f=s.attributes,h=[["href",u]];c&&h.push(["class",c]),d&&h.push(["target",d]);for(var v in f)h.push([v,f[v]]);i.push({type:m,tagName:l,attributes:h,selfClosing:!1}),i.push({type:g,chars:a}),i.push({type:b,tagName:l})}else i.push({type:g,chars:r.toString()})}return i}function r(e,t,n,i){for(var o=1;n<t.length&&o>0;){var r=t[n];r.type===m&&r.tagName.toUpperCase()===e?o++:r.type===b&&r.tagName.toUpperCase()===e&&o--,i.push(r),n++}return i}function s(e){return e}function a(e){return e.replace(/"/g,"&quot;")}function u(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=i[0],r=i[1];t.push(o+'="'+a(r)+'"')}return t}t.__esModule=!0,t.default=i;var l=n(19),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=n(22),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=p.options,h=f.Options,m="StartTag",b="EndTag",g="Chars",v="Comment"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(3),r=i(o),s=n(4),a=i(s),u=n(5),l=i(u),c=n(6),d=i(c),p=n(21),f=i(p),h={HTML5NamedCharRefs:r.default,EntityParser:a.default,EventedTokenizer:l.default,Tokenizer:d.default,tokenize:f.default};t.default=h},function(e,t,n){"use strict";function i(e){return s.test(e)}function o(e){return a.test(e)}function r(e){return e.replace(u,"\n")}t.__esModule=!0,t.isSpace=i,t.isAlpha=o,t.preprocessInput=r;var s=/[\t\n\f ]/,a=/[A-Za-z]/,u=/\r\n?/g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return new s.default(new u.default(c.default),t).tokenize(e)}t.__esModule=!0,t.default=o;var r=n(6),s=i(r),a=n(4),u=i(a),l=n(3),c=i(l)},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var o=n(1),r=n(23),s=i(r),a=n(24),u=i(a),l=n(25),c=i(l);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var d=function(e){return c.run(u.run(e))},p=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=d(e),i=[],o=0;o<n.length;o++){var r=n[o];!r.isLink||t&&r.type!==t||i.push(r.toObject())}return i},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=d(e);return 1===n.length&&n[0].isLink&&(!t||n[0].type===t)};t.find=p,t.inherits=o.inherits,t.options=s,t.parser=c,t.scanner=u,t.test=f,t.tokenize=d},function(e,t,n){"use strict";function i(e){e=e||{},this.defaultProtocol=e.defaultProtocol||u.defaultProtocol,this.events=e.events||u.events,this.format=e.format||u.format,this.formatHref=e.formatHref||u.formatHref,this.nl2br=e.nl2br||u.nl2br,this.tagName=e.tagName||u.tagName,this.target=e.target||u.target,this.validate=e.validate||u.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||u.attributes,this.className=e.className||e.linkClass||u.className;for(var t=e.ignoreTags||u.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}function o(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function r(e){return e}function s(e,t){return"url"===t?"_blank":null}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={defaultProtocol:"http",events:null,format:r,formatHref:r,nl2br:!1,tagName:"a",target:s,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};t.defaults=u,t.Options=i,t.contains=o,i.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var i=this[e];if(!i)return i;switch(void 0===i?"undefined":a(i)){case"function":return i(t,n.type);case"object":var o=i[n.type]||u[e];return"function"==typeof o?o(t,n.type):o}return i},getObject:function(e,t,n){var i=this[e];return"function"==typeof i?i(t,n.type):i}}},function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n(7),o=n(2),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s="aaa|aarp|abb|abbott|abogado|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|af|afl|ag|agency|ai|aig|airforce|airtel|al|alibaba|alipay|allfinanz|alsace|am|amica|amsterdam|an|analytics|android|ao|apartments|app|apple|aq|aquarelle|ar|aramco|archi|army|arpa|arte|as|asia|associates|at|attorney|au|auction|audi|audio|author|auto|autos|avianca|aw|ax|axa|az|azure|ba|baidu|band|bank|bar|barcelona|barclaycard|barclays|bargains|bauhaus|bayern|bb|bbc|bbva|bcg|bcn|bd|be|beats|beer|bentley|berlin|best|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bom|bond|boo|book|boots|bosch|bostik|bot|boutique|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|camera|camp|cancerresearch|canon|capetown|capital|car|caravan|cards|care|career|careers|cars|cartier|casa|cash|casino|cat|catering|cba|cbn|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chloe|christmas|chrome|church|ci|cipriani|circle|cisco|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|date|dating|datsun|day|dclk|de|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dj|dk|dm|dnp|do|docs|dog|doha|domains|download|drive|dubai|durban|dvag|dz|earth|eat|ec|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|er|erni|es|esq|estate|et|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|fage|fail|fairwinds|faith|family|fan|fans|farm|fashion|fast|feedback|ferrero|fi|film|final|finance|financial|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|florist|flowers|flsmidth|fly|fm|fo|foo|football|ford|forex|forsale|forum|foundation|fox|fr|fresenius|frl|frogans|frontier|fund|furniture|futbol|fyi|ga|gal|gallery|gallup|game|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|gold|goldpoint|golf|goo|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|group|gs|gt|gu|gucci|guge|guide|guitars|guru|gw|gy|hamburg|hangout|haus|hdfcbank|health|healthcare|help|helsinki|here|hermes|hiphop|hitachi|hiv|hk|hm|hn|hockey|holdings|holiday|homedepot|homes|honda|horse|host|hosting|hoteles|hotmail|house|how|hr|hsbc|ht|hu|hyundai|ibm|icbc|ice|icu|id|ie|ifm|iinet|il|im|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|international|investments|io|ipiranga|iq|ir|irish|is|iselect|ist|istanbul|it|itau|iwc|jaguar|java|jcb|je|jetzt|jewelry|jlc|jll|jm|jmp|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kitchen|kiwi|km|kn|koeln|komatsu|kp|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|lamborghini|lamer|lancaster|land|landrover|lanxess|lasalle|lat|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|legal|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|limited|limo|lincoln|linde|link|live|living|lixil|lk|loan|loans|local|locus|lol|london|lotte|lotto|love|lr|ls|lt|ltd|ltda|lu|lupin|luxe|luxury|lv|ly|ma|madrid|maif|maison|makeup|man|management|mango|market|marketing|markets|marriott|mba|mc|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|mg|mh|miami|microsoft|mil|mini|mk|ml|mm|mma|mn|mo|mobi|mobily|moda|moe|moi|mom|monash|money|montblanc|mormon|mortgage|moscow|motorcycles|mov|movie|movistar|mp|mq|mr|ms|mt|mtn|mtpc|mtr|mu|museum|mutuelle|mv|mw|mx|my|mz|na|nadex|nagoya|name|natura|navy|nc|ne|nec|net|netbank|network|neustar|new|news|nexus|nf|ng|ngo|nhk|ni|nico|nikon|ninja|nissan|nl|no|nokia|norton|nowruz|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|office|okinawa|om|omega|one|ong|onl|online|ooo|oracle|orange|org|organic|origins|osaka|otsuka|ovh|pa|page|pamperedchef|panerai|paris|pars|partners|parts|party|passagens|pe|pet|pf|pg|ph|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pohl|poker|porn|post|pr|praxi|press|pro|prod|productions|prof|promo|properties|property|protection|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|racing|re|read|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|ricoh|rio|rip|ro|rocher|rocks|rodeo|room|rs|rsvp|ru|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|saxo|sb|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scor|scot|sd|se|seat|security|seek|select|sener|services|seven|sew|sex|sexy|sfr|sg|sh|sharp|shell|shia|shiksha|shoes|show|shriram|si|singles|site|sj|sk|ski|skin|sky|skype|sl|sm|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|st|stada|star|starhub|statefarm|statoil|stc|stcgroup|stockholm|storage|store|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|taobao|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|team|tech|technology|tel|telecity|telefonica|temasek|tennis|tf|tg|th|thd|theater|theatre|tickets|tienda|tiffany|tips|tires|tirol|tj|tk|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tp|tr|trade|trading|training|travel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubs|ug|uk|unicom|university|uno|uol|us|uy|uz|va|vacations|vana|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|viking|villas|vin|vip|virgin|vision|vista|vistaprint|viva|vlaanderen|vn|vodka|volkswagen|vote|voting|voto|voyage|vu|vuelos|wales|walter|wang|wanggou|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|wme|wolterskluwer|work|works|world|ws|wtc|wtf|xbox|xerox|xin|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|youtube|yt|za|zara|zero|zip|zm|zone|zuerich|zw".split("|"),a="0123456789".split(""),u="0123456789abcdefghijklmnopqrstuvwxyz".split(""),l=[" ","\f","\r","\t","\v","","",""],c=[],d=function(e){return new i.CharacterState(e)},p=d(),f=d(o.NUM),h=d(o.DOMAIN),m=d(),b=d(o.WS);p.on("@",d(o.AT)).on(".",d(o.DOT)).on("+",d(o.PLUS)).on("#",d(o.POUND)).on("?",d(o.QUERY)).on("/",d(o.SLASH)).on("_",d(o.UNDERSCORE)).on(":",d(o.COLON)).on("{",d(o.OPENBRACE)).on("[",d(o.OPENBRACKET)).on("<",d(o.OPENANGLEBRACKET)).on("(",d(o.OPENPAREN)).on("}",d(o.CLOSEBRACE)).on("]",d(o.CLOSEBRACKET)).on(">",d(o.CLOSEANGLEBRACKET)).on(")",d(o.CLOSEPAREN)).on("&",d(o.AMPERSAND)).on([",",";","!",'"',"'"],d(o.PUNCTUATION)),p.on("\n",d(o.NL)).on(l,b),b.on(l,b);for(var g=0;g<s.length;g++){var v=(0,i.stateify)(s[g],p,o.TLD,o.DOMAIN);c.push.apply(c,v)}var y=(0,i.stateify)("file",p,o.DOMAIN,o.DOMAIN),w=(0,i.stateify)("ftp",p,o.DOMAIN,o.DOMAIN),k=(0,i.stateify)("http",p,o.DOMAIN,o.DOMAIN),E=(0,i.stateify)("mailto",p,o.DOMAIN,o.DOMAIN);c.push.apply(c,y),c.push.apply(c,w),c.push.apply(c,k);var x=y.pop(),T=w.pop(),C=k.pop(),S=E.pop(),N=d(o.DOMAIN),_=d(o.PROTOCOL),O=d(o.MAILTO);T.on("s",N).on(":",_),C.on("s",N).on(":",_),c.push(N),x.on(":",_),N.on(":",_),S.on(":",O);var D=(0,i.stateify)("localhost",p,o.LOCALHOST,o.DOMAIN);c.push.apply(c,D),p.on(a,f),f.on("-",m).on(a,f).on(u,h),h.on("-",m).on(u,h);for(var A=0;A<c.length;A++)c[A].on("-",m).on(u,h);m.on("-",m).on(a,h).on(u,h),p.defaultTransition=d(o.SYM);var R=function(e){for(var t=e.replace(/[A-Z]/g,function(e){return e.toLowerCase()}),n=e.length,i=[],o=0;o<n;){for(var r=p,s=null,a=0,u=null,l=-1;o<n&&(s=r.next(t[o]));)null,r=s,r.accepts()?(l=0,u=r):l>=0&&l++,a++,o++;if(!(l<0)){o-=l,a-=l;var c=u.emit();i.push(new c(e.substr(o-a,a)))}}return i},I=p;t.State=i.CharacterState,t.TOKENS=r,t.run=R,t.start=I},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var o=n(7),r=n(2),s=(i(r),n(26)),a=i(s),u=function(e){return new o.TokenState(e)},l=u(),c=u(),d=u(),p=u(),f=u(),h=u(),m=u(),b=u(s.URL),g=u(),v=u(s.URL),y=u(s.URL),w=u(),k=u(),E=u(),x=u(),T=u(),C=u(s.URL),S=u(s.URL),N=u(s.URL),_=u(s.URL),O=u(),D=u(),A=u(),R=u(),I=u(),M=u(),L=u(s.EMAIL),P=u(),V=u(s.EMAIL),j=u(s.MAILTOEMAIL),B=u(),H=u(),F=u(),z=u(),U=u(s.NL);l.on(r.NL,U).on(r.PROTOCOL,c).on(r.MAILTO,d).on(r.SLASH,p),c.on(r.SLASH,p),p.on(r.SLASH,f),l.on(r.TLD,h).on(r.DOMAIN,h).on(r.LOCALHOST,b).on(r.NUM,h),f.on(r.TLD,y).on(r.DOMAIN,y).on(r.NUM,y).on(r.LOCALHOST,y),h.on(r.DOT,m),I.on(r.DOT,M),m.on(r.TLD,b).on(r.DOMAIN,h).on(r.NUM,h).on(r.LOCALHOST,h),M.on(r.TLD,L).on(r.DOMAIN,I).on(r.NUM,I).on(r.LOCALHOST,I),b.on(r.DOT,m),L.on(r.DOT,M),b.on(r.COLON,g).on(r.SLASH,y),g.on(r.NUM,v),v.on(r.SLASH,y),L.on(r.COLON,P),P.on(r.NUM,V);var W=[r.DOMAIN,r.AT,r.LOCALHOST,r.NUM,r.PLUS,r.POUND,r.PROTOCOL,r.SLASH,r.TLD,r.UNDERSCORE,r.SYM,r.AMPERSAND],K=[r.COLON,r.DOT,r.QUERY,r.PUNCTUATION,r.CLOSEBRACE,r.CLOSEBRACKET,r.CLOSEANGLEBRACKET,r.CLOSEPAREN,r.OPENBRACE,r.OPENBRACKET,r.OPENANGLEBRACKET,r.OPENPAREN];y.on(r.OPENBRACE,k).on(r.OPENBRACKET,E).on(r.OPENANGLEBRACKET,x).on(r.OPENPAREN,T),w.on(r.OPENBRACE,k).on(r.OPENBRACKET,E).on(r.OPENANGLEBRACKET,x).on(r.OPENPAREN,T),k.on(r.CLOSEBRACE,y),E.on(r.CLOSEBRACKET,y),x.on(r.CLOSEANGLEBRACKET,y),T.on(r.CLOSEPAREN,y),C.on(r.CLOSEBRACE,y),S.on(r.CLOSEBRACKET,y),N.on(r.CLOSEANGLEBRACKET,y),_.on(r.CLOSEPAREN,y),O.on(r.CLOSEBRACE,y),D.on(r.CLOSEBRACKET,y),A.on(r.CLOSEANGLEBRACKET,y),R.on(r.CLOSEPAREN,y),k.on(W,C),E.on(W,S),x.on(W,N),T.on(W,_),k.on(K,O),E.on(K,D),x.on(K,A),T.on(K,R),C.on(W,C),S.on(W,S),N.on(W,N),_.on(W,_),C.on(K,C),S.on(K,S),N.on(K,N),_.on(K,_),O.on(W,C),D.on(W,S),A.on(W,N),R.on(W,_),O.on(K,O),D.on(K,D),A.on(K,A),R.on(K,R),y.on(W,y),w.on(W,y),y.on(K,w),w.on(K,w),d.on(r.TLD,j).on(r.DOMAIN,j).on(r.NUM,j).on(r.LOCALHOST,j),j.on(W,j).on(K,B),B.on(W,j).on(K,B);var $=[r.DOMAIN,r.NUM,r.PLUS,r.POUND,r.QUERY,r.UNDERSCORE,r.SYM,r.AMPERSAND,r.TLD];h.on($,H).on(r.AT,F),b.on($,H).on(r.AT,F),m.on($,H),H.on($,H).on(r.AT,F).on(r.DOT,z),z.on($,H),F.on(r.TLD,I).on(r.DOMAIN,I).on(r.LOCALHOST,L);var q=function(e){for(var t=e.length,n=0,i=[],o=[];n<t;){for(var r=l,a=null,u=null,c=0,d=null,p=-1;n<t&&!(a=r.next(e[n]));)o.push(e[n++]);for(;n<t&&(u=a||r.next(e[n]));)a=null,r=u,r.accepts()?(p=0,d=r):p>=0&&p++,n++,c++;if(p<0)for(var f=n-c;f<n;f++)o.push(e[f]);else{o.length>0&&(i.push(new s.TEXT(o)),o=[]),n-=p,c-=p;var h=d.emit();i.push(new h(e.slice(n-c,n)))}}return o.length>0&&i.push(new s.TEXT(o)),i};t.State=o.TokenState,t.TOKENS=a,t.run=q,t.start=l},function(e,t,n){"use strict";function i(e){return e instanceof s.DOMAIN||e instanceof s.TLD}t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var o=n(8),r=n(1),s=n(2),a=(0,o.createTokenClass)();a.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var u=(0,r.inherits)(a,(0,o.createTokenClass)(),{type:"email",isLink:!0}),l=(0,r.inherits)(a,(0,o.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){this.v;return"mailto:"+this.toString()}}),c=(0,r.inherits)(a,(0,o.createTokenClass)(),{type:"text"}),d=(0,r.inherits)(a,(0,o.createTokenClass)(),{type:"nl"}),p=(0,r.inherits)(a,(0,o.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=!1,n=!1,o=this.v,r=[],a=0;o[a]instanceof s.PROTOCOL;)t=!0,r.push(o[a].toString().toLowerCase()),a++;for(;o[a]instanceof s.SLASH;)n=!0,r.push(o[a].toString()),a++;for(;i(o[a]);)r.push(o[a].toString().toLowerCase()),a++;for(;a<o.length;a++)r.push(o[a].toString());return r=r.join(""),t||n||(r=e+"://"+r),r},hasProtocol:function(){return this.v[0]instanceof s.PROTOCOL}});t.Base=a,t.MAILTOEMAIL=u,t.EMAIL=l,t.NL=d,t.TEXT=c,t.URL=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=i(s),u=n(28),l=i(u),c=function(){function e(t,n,i,r){var s=this;o(this,e),this.parentViewModel=n,this.templateId="verb-editor",this.viewModel=new l.default(t,this,i,r),this.name=a.default.observable(e.tabName(r)),this.active=a.default.computed(function(){return n.activeTab()===s}),this.dirty=a.default.computed(function(){return s.viewModel.dirty()})}return r(e,[{key:"templateBinding",value:function(){return{name:this.templateId,data:this.viewModel}}},{key:"select",value:function(){this.parentViewModel.activeTab(this)}},{key:"close",value:function(){this.viewModel.willClose()&&this.parentViewModel.closeTab(this)}},{key:"tabPaneClasses",value:function(){return["tab-pane-editor","tab-pane-verb-editor"]}},{key:"hideIfOnlyMe",value:function(){return!1}}],[{key:"tabName",value:function(e){return e.objectId+"."+e.verb.name}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(t,n,o,r){var a=t.CodeMirror,u=t.win,l=r.verb,c=r.objectId;i(this,e),this.window=u,this.parentViewModel=n,this.socket=o,this.objectId=c,this.name=l.name,this.codemirrorOptions={lineNumbers:!0,theme:"tomorrow-night-bright",tabSize:2,indentWithTabs:!1,extraKeys:{Tab:function(e){return e.doc.somethingSelected()?a.Pass:e.execCommand("insertSoftTab")}}},this.pattern=s.default.observable(l.pattern),this.dobjarg=s.default.observable(l.dobjarg),this.preparg=s.default.observable(l.preparg),this.iobjarg=s.default.observable(l.iobjarg),this.code=s.default.observable(l.code),this._pattern=s.default.observable(l.pattern),this._dobjarg=s.default.observable(l.dobjarg),this._preparg=s.default.observable(l.preparg),this._iobjarg=s.default.observable(l.iobjarg),this._code=s.default.observable(l.code),this.dirty=s.default.computed(this.computeDirty.bind(this))}return o(e,[{key:"computeDirty",value:function(){return this.pattern()!==this._pattern()||this.dobjarg()!==this._dobjarg()||this.preparg()!==this._preparg()||this.iobjarg()!==this._iobjarg()||this.code()!==this._code()}},{key:"save",value:function(){var e=this,t={name:this.name,pattern:this.pattern(),dobjarg:this.dobjarg(),preparg:this.preparg(),iobjarg:this.iobjarg(),code:this.code()},n={objectId:this.objectId,verb:t};if(!this.socket.connected)return void this.window.alert(["The client tab that this editor was opened from has been","closed.  You must keep that open for saving to work."].join(" "));this.socket.emit("save-verb",n,function(t){"saved"===t?(e._pattern(e.pattern()),e._dobjarg(e.dobjarg()),e._preparg(e.preparg()),e._iobjarg(e.iobjarg()),e._code(e.code())):e.window.alert(t)})}},{key:"willClose",value:function(){var e=["Are you sure you want to close this tab?","You have unsaved changes that will be lost."].join(" ");return!this.dirty()||this.window.confirm(e)}},{key:"onKeyDown",value:function(e,t){var n=void 0===t.which?t.keyCode:t.which,i=t.metaKey,o=t.ctrlKey,r=83===n,s=87===n;return o&&r||i&&r?(this.save(),!1):!(o&&s||i&&s)||(this.parentViewModel.close(),!1)}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),a=i(s),u=n(30),l=i(u),c=function(){function e(t,n,i,r){var s=this;o(this,e),this.parentViewModel=n,this.templateId="function-editor",this.viewModel=new l.default(t,this,i,r),this.name=a.default.observable(e.tabName(r)),this.active=a.default.computed(function(){return n.activeTab()===s}),this.dirty=a.default.computed(function(){return s.viewModel.dirty()})}return r(e,[{key:"templateBinding",value:function(){return{name:this.templateId,data:this.viewModel}}},{key:"select",value:function(){this.parentViewModel.activeTab(this)}},{key:"close",value:function(){this.viewModel.willClose()&&this.parentViewModel.closeTab(this)}},{key:"tabPaneClasses",value:function(){return["tab-pane-editor","tab-pane-function-editor"]}},{key:"hideIfOnlyMe",value:function(){return!1}}],[{key:"tabName",value:function(e){return e.objectId+"."+e.name}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(t,n,o,r){var a=t.CodeMirror,u=t.win,l=this,c=r.objectId,d=r.src,p=r.name;i(this,e),this.window=u,this.parentViewModel=n,this.socket=o,this.objectId=c,this.src=d,this.name=p,this.codemirrorOptions={lineNumbers:!0,theme:"tomorrow-night-bright",tabSize:2,indentWithTabs:!1,extraKeys:{Tab:function(e){return e.doc.somethingSelected()?a.Pass:e.execCommand("insertSoftTab")}}},this.code=s.default.observable(this.src),this._code=s.default.observable(this.src),this.dirty=s.default.computed(function(){return l.code()!==l._code()})}return o(e,[{key:"save",value:function(){var e=this,t={name:this.name,src:this.code(),objectId:this.objectId};if(!this.socket.connected)return void this.window.alert(["The client tab that this editor was opened from has been","closed.  You must keep that open for saving to work."].join(" "));this.socket.emit("save-function",t,function(t){"saved"===t?e._code(e.code()):e.window.alert(t)})}},{key:"willClose",value:function(){var e=["Are you sure you want to close this tab?","You have unsaved changes that will be lost."].join(" ");return!this.dirty()||this.window.confirm(e)}},{key:"onKeyDown",value:function(e,t){var n=void 0===t.which?t.keyCode:t.which,i=t.metaKey,o=t.ctrlKey,r=83===n,s=87===n;return o&&r||i&&r?(this.save(),!1):!(o&&s||i&&s)||(this.parentViewModel.close(),!1)}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return n.top>=i.top&&n.left>=i.left&&n.bottom<=i.bottom&&n.right<=i.right}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(){function e(t){r(this,e),this.data=t,this.objectId=t.objectId,this.active=l.default.observable(!1),this.name=l.default.computed(this.computeName.bind(this))}return a(e,[{key:"computeName",value:function(){throw new Error("Must be subclassed.")}},{key:"openEditor",value:function(){throw new Error("Must be subclassed.")}}],[{key:"newFromResult",value:function(e){if(e.function)return new d(e);if(e.verb)return new p(e);throw new Error("Invalid result type.")}}]),e}(),d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"computeName",value:function(){return this.objectId+"."+this.data.function}},{key:"openEditor",value:function(e,t){var n={objectId:this.objectId,name:this.data.function};e.emit("get-function",n,function(n){t.newEditFunctionTab(e,n)})}}]),t}(c),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"computeName",value:function(){return this.objectId+"."+this.data.verb}},{key:"openEditor",value:function(e,t){var n={objectId:this.objectId,name:this.data.verb};e.emit("get-verb",n,function(n){t.newEditVerbTab(e,n)})}}]),t}(c),f=function(){function e(t,n,i){var o=t.doc,s=this;r(this,e),this.document=o,this.parentViewModel=n,this.socket=i,this.inputHasFocus=!0,this.search=l.default.observable(""),this.results=l.default.observableArray([]),this.selectedIndex=l.default.observable(0),this.selectionDirection=l.default.observable(0),this.search.subscribe(this.onSearch.bind(this)),this.activeResult=l.default.computed(this.computeActiveResult.bind(this)),this.hasResults=l.default.computed(function(){return s.results().length>0})}return a(e,[{key:"computeActiveResult",value:function(){var e=this.results(),t=this.selectedIndex();return e.length>0?(e.forEach(function(e){e.active(!1)}),e[t].active(!0),this.scrollActiveResultIntoView(),e[t]):null}},{key:"scrollActiveResultIntoView",value:function(){var e=this.document.querySelector(".search .results li.active"),t=this.document.querySelector(".search .results");e&&!s(e,t)&&e.scrollIntoView(-1===this.selectionDirection())}},{key:"close",value:function(){this.parentViewModel.searchViewModel(null)}},{key:"openActiveResult",value:function(){this.activeResult().openEditor(this.socket,this.parentViewModel)}},{key:"onSearch",value:function(e){var t=this;this.socket.emit("search",e,function(e){t.selectedIndex(0),t.results(e.map(function(e){return c.newFromResult(e)}))})}},{key:"onKeyDown",value:function(e,t){var n=void 0===t.which?t.keyCode:t.which,i=this.selectedIndex();switch(n){case 13:return this.openActiveResult(),this.close(),!1;case 27:return this.close(),!1;case 38:return i>0?this.selectedIndex(i-1):this.selectedIndex(this.results().length-1),this.selectionDirection(-1),!1;case 40:return i<this.results().length-1?this.selectedIndex(i+1):this.selectedIndex(0),this.selectionDirection(1),!1;default:return!0}}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=!1,i=0,r=function(){n=!1,i=0};e.onbeforeunload=function(){return t()&&!n?(n=!0,i=setTimeout(r,100),o):null},e.onunload=function(){clearTimeout(i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o="This action will log you out of the game!"}]);